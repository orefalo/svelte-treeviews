var qe=Object.defineProperty;var Ae=i=>{throw TypeError(i)};var Ze=(i,e,t)=>e in i?qe(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var C=(i,e,t)=>Ze(i,typeof e!="symbol"?e+"":e,t),Je=(i,e,t)=>e.has(i)||Ae("Cannot "+t);var oe=(i,e,t)=>(Je(i,e,"read from private field"),t?t.call(i):e.get(i)),be=(i,e,t)=>e.has(i)?Ae("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t);import{d as we,p as te,a as x,s as J,b as N,u as he,o as Le,c as We,g as u,e as L,f as Ye,i as K,t as j,h as b,j as ne,k as P,l as U,m as Q,n as D,q as fe,r as A,v as me,w as E,x as Se,y as G,z as se,A as Te,B as q,C as Xe,D as ze,E as Ge,F as pe,G as ee,H as $e,I as et,J as Ke,K as Fe,L as tt,M as Ee,N as Ne,O as nt}from"./external.CPem1cX5.js";const it="modulepreload",rt=function(i){return"/svelte-treeviews/"+i},Re={},lt=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),s=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));r=Promise.all(t.map(o=>{if(o=rt(o),o in Re)return;Re[o]=!0;const d=o.endsWith(".css"),a=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${a}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":it,d||(h.as="script"),h.crossOrigin="",h.href=o,s&&h.setAttribute("nonce",s),document.head.appendChild(h),d)return new Promise((c,f)=>{h.addEventListener("load",c),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return r.then(()=>e()).catch(l=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=l,window.dispatchEvent(s),!s.defaultPrevented)throw l})};we(["click"]);class ot{constructor(e,t,n,r){C(this,"model");C(this,"modelCount");C(this,"itemSize");C(this,"estimatedItemSize");C(this,"itemSizeAndPositionData");C(this,"lastMeasuredIndex");C(this,"totalSize");this.model=e,this.itemSize=n,this.modelCount=t,this.estimatedItemSize=r,this.itemSizeAndPositionData=[],this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig(e,t,n){t!==void 0&&(this.modelCount=t),n!==void 0&&(this.estimatedItemSize=n),e!==void 0&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!==void 0?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.modelCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:t}=this;return typeof t=="function"?this.model?t(this.model[e],e):0:Array.isArray(t)?t[e]:t}computeTotalSizeAndPositionData(){let e=0;for(let t=0;t<this.modelCount;t++){const n=this.getSize(t),r=e;e+=n,this.itemSizeAndPositionData[t]={offset:r,size:n}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){return e<0||e>=this.modelCount?{size:0,offset:0}:this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const t=this.getSizeAndPositionOfLastMeasuredItem();let n=t.offset+t.size;for(let r=this.lastMeasuredIndex+1;r<=e;r++){const l=this.getSize(r);if(l===void 0||isNaN(l))throw Error(`Invalid size returned for index ${r} of value ${l}`);this.itemSizeAndPositionData[r]={offset:n,size:l},n+=l}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getEstimatedItemSize(){return this.estimatedItemSize||typeof this.itemSize=="number"&&this.itemSize||50}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.modelCount-this.lastMeasuredIndex-1)*this.getEstimatedItemSize()}getUpdatedOffsetForIndex(e=ce.START,t,n,r){if(t<=0)return 0;const l=this.getSizeAndPositionForIndex(r),s=l.offset,o=s-t+l.size;let d;switch(e){case ce.END:d=o;break;case ce.CENTER:d=s-(t-l.size)/2;break;case ce.START:d=s;break;default:d=Math.max(o,Math.min(s,n))}const a=this.getTotalSize();return Math.max(0,Math.min(a-t,d))}getVisibleRange(e=0,t,n){if(this.getTotalSize()===0)return{start:0,end:0};const l=t+e;let s=this.findNearestItem(t);if(s===void 0)throw Error(`Invalid offset ${t} specified`);const o=this.getSizeAndPositionForIndex(s);t=o.offset+o.size;let d=s;for(;t<l&&d<this.modelCount-1;)d++,t+=this.getSizeAndPositionForIndex(d).size;return n&&(s=Math.max(0,s-n),d=Math.min(d+n,this.modelCount-1)),{start:s,end:d}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const t=this.getSizeAndPositionOfLastMeasuredItem(),n=Math.max(0,this.lastMeasuredIndex);return t.offset>=e?this.binarySearch(0,n,e):this.exponentialSearch(n,e)}binarySearch(e,t,n){let r=0,l=0;for(;e<=t;){if(r=e+Math.floor((t-e)/2),l=this.getSizeAndPositionForIndex(r).offset,l===n)return r;l<n?e=r+1:l>n&&(t=r-1)}return e>0?e-1:0}exponentialSearch(e,t){let n=1;for(;e<this.modelCount&&this.getSizeAndPositionForIndex(e).offset<t;)e+=n,n*=2;return this.binarySearch(Math.floor(e/2),Math.min(e,this.modelCount-1),t)}}const st=(()=>{let i=!1;try{const e=Object.defineProperty({},"passive",{get(){return i={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return i})();var dt=P('<div><!> <div class="virtual-list-inner svelte-f32i87"><!></div> <!></div>');function at(i,e){te(e,!0);const t=x(e,"width",3,"100%"),n=x(e,"model",19,()=>[]),r=x(e,"windowOverPadding",3,3),l=x(e,"scrollDirection",19,()=>B.VERTICAL),s=x(e,"scrollToAlignment",19,()=>ce.AUTO),o=x(e,"scrollToBehaviour",19,()=>He.INSTANT),d=x(e,"class",3,"");x(e,"style",3,"");const a={[B.VERTICAL]:"top",[B.HORIZONTAL]:"left"},h={[B.VERTICAL]:"scrollTop",[B.HORIZONTAL]:"scrollLeft"},c=new ot(n(),e.modelCount,e.itemSize,e.estimatedItemSize);let f=!1,g,_=J(N([])),v=J(N({offset:e.scrollOffset||e.scrollToIndex!==void 0&&e.modelCount&&W(e.scrollToIndex)||0,scrollChangeReason:ae.REQUESTED})),I={},y={scrollToIndex:e.scrollToIndex,scrollToAlignment:s(),scrollOffset:e.scrollOffset,modelCount:e.modelCount,itemSize:e.itemSize,estimatedItemSize:e.estimatedItemSize},T={},z=J(""),k=J("");he(()=>{e.scrollToIndex,s(),e.scrollOffset,e.modelCount,e.itemSize,e.estimatedItemSize,V()}),he(()=>{u(v),w()}),he(()=>{e.height,t(),f&&F(0)}),(()=>{if(l()===B.VERTICAL&&typeof e.height!="number")throw new Error("virtual list's height must be a number when scrollDirection is 'vertical', got "+e.height);if(l()===B.HORIZONTAL&&typeof t()!="number")throw new Error("virtual list's width must be a number if scrollDirection is 'horizontal', got "+t());O()})(),Le(()=>{g.addEventListener("scroll",de,st),e.scrollOffset!==void 0?M(e.scrollOffset):e.scrollToIndex!==void 0&&M(W(e.scrollToIndex)),f=!0}),We(()=>{f&&g.removeEventListener("scroll",de)});function V(){if(!f)return;e.scrollToIndex&&e.scrollOffset&&console.log("VirtualList: scrollToIndex and scrollOffset shall not be used together.");const m=y.scrollToIndex!==e.scrollToIndex||y.scrollToAlignment!==s(),S=y.modelCount!==e.modelCount||y.itemSize!==e.itemSize||y.estimatedItemSize!==e.estimatedItemSize;S&&(c.updateConfig(e.itemSize,e.modelCount,e.estimatedItemSize),F()),y.scrollOffset!==e.scrollOffset?L(v,N({offset:e.scrollOffset||0,scrollChangeReason:ae.REQUESTED})):typeof e.scrollToIndex=="number"&&(m||S)&&L(v,N({offset:W(e.scrollToIndex,s(),e.modelCount),scrollChangeReason:ae.REQUESTED})),y={scrollToIndex:e.scrollToIndex,scrollToAlignment:s(),scrollOffset:e.scrollOffset,modelCount:e.modelCount,itemSize:e.itemSize,estimatedItemSize:e.estimatedItemSize}}function w(){if(!f)return;const{offset:m,scrollChangeReason:S}=u(v);(I.offset!==m||I.scrollChangeReason!==S)&&O(),I.offset!==m&&S===ae.REQUESTED&&M(m),I=u(v)}function O(){if(n().length===0||e.isDisabled)return;const{offset:m}=u(v);let{start:S,end:R}=c.getVisibleRange(l()===B.VERTICAL?e.height:t(),m,r()),Z=[];const Y=c.getTotalSize(),re=typeof e.height=="number"?"px":"",le=typeof t()=="number"?"px":"";if(l()===B.VERTICAL?(L(z,`height:${e.height}${re};width:${t()}${le};`),L(k,`flex-direction:column;height:${Y}px;`)):(L(z,`height:${e.height}${re};width:${t()}${le};`),L(k,`min-height:100%;width:${Y}px;`)),n()&&S!==void 0&&R!==void 0){for(let X=S;X<=R;(X+=1)-1)Z.push({item:n()[X],index:X,style:Pe(X)});if(e.onVisibleRangeUpdate){const X=c.getVisibleRange(l()===B.VERTICAL?e.height:t(),m,0);e.onVisibleRangeUpdate({type:"range.update",start:X.start,end:X.end})}}L(_,N(Z))}function M(m){"scroll"in g?g.scroll({[a[l()]]:m,behavior:o()}):g[h[l()]]=m}function F(m=0){T={},c.resetItem(m),O()}function W(m,S=s(),R=e.modelCount){return m<0?m=0:m>=R&&(m=R-1),c.getUpdatedOffsetForIndex(S,l()===B.VERTICAL?e.height:t(),u(v).offset||0,m)}const de=m=>{const S=g[h[l()]];S<0||u(v).offset===S||m.target!==g||(L(v,N({offset:S,scrollChangeReason:ae.OBSERVED})),e.onAfterScroll&&e.onAfterScroll({type:"scroll.update",offset:S,event:m}))};function Pe(m){if(T[m])return T[m];const{size:S,offset:R}=c.getSizeAndPositionForIndex(m),Z=l()===B.VERTICAL?`left:0;width:100%;height:${S}px;position:absolute;top:${R}px;`:`top:0;width:${S}px;position:absolute;height:100%;left:${R}px;`;return T[m]=Z}var H=dt();Ye(H,m=>g=m,()=>g);var ue=A(H);K(ue,()=>e.header,m=>{var S=Q(),R=D(S);se(R,()=>e.header),b(m,S)});var ie=U(ue,2),Ce=A(ie);K(Ce,()=>e.isDisabled,m=>{var S=Q(),R=D(S);fe(R,17,n,me,(Z,Y,re)=>{var le=Q(),X=D(le);se(X,()=>e.vl_slot,()=>({item:u(Y),style:"",index:re})),b(Z,le)}),b(m,S)},m=>{var S=Q(),R=D(S);fe(R,17,()=>u(_),me,(Z,Y)=>{var re=Q(),le=D(re);se(le,()=>e.vl_slot,()=>({item:u(Y).item,style:u(Y).style,index:u(Y).index})),b(Z,re)}),b(m,S)}),E(ie);var ge=U(ie,2);return K(ge,()=>e.footer,m=>{var S=Q(),R=D(S);se(R,()=>e.footer),b(m,S)}),E(H),j(()=>{Se(H,`virtual-list-wrapper $${d()??""} svelte-f32i87`),G(H,"style",u(z)),G(ie,"style",u(k))}),b(i,H),ne({recomputeSizes:F})}var He=(i=>(i.AUTO="auto",i.SMOOTH="smooth",i.INSTANT="instant",i))(He||{}),ce=(i=>(i.AUTO="auto",i.START="start",i.CENTER="center",i.END="end",i))(ce||{}),B=(i=>(i.HORIZONTAL="horizontal",i.VERTICAL="vertical",i))(B||{}),ae=(i=>(i[i.OBSERVED=0]="OBSERVED",i[i.REQUESTED=1]="REQUESTED",i))(ae||{}),ct=P('<div class="tree-line tree-vline svelte-gfld7i"></div>'),ht=P('<div class="tree-line tree-hline svelte-gfld7i"></div>'),ft=P("<!> <!>",1),ut=P('<div><!> <div class="tree-node-inner"><!></div></div>');function gt(i,e){te(e,!0);let t=x(e,"rtl",3,!1),n=x(e,"btt",3,!1),r=x(e,"indent",3,20),l=x(e,"treeLine",3,!0),s=x(e,"treeLineOffset",3,10),o=x(e,"class",3,""),d=x(e,"style",3,""),a=q(()=>`${t()?"paddingRight":"paddingLeft"}:${r()*(e.nodeInfo.level-1)}px`),h=q(()=>`${t()?"right":"left"}:${(e.nodeInfo.level-2)*r()+s()}px`);he(()=>{var z,k;const T=e.nodeInfo.expended;console.log("toggleOpen"),!c&&(T?(z=e.onNodeOpened)==null||z.call(e,e.nodeInfo):(k=e.onNodeclosed)==null||k.call(e,e.nodeInfo),f())}),he(()=>{var T,z;e.nodeInfo.checked,!c&&(T=e.processor)!=null&&T.afterOneCheckChanged(e.nodeInfo)&&((z=e.onNodeChecked)==null||z.call(e,e.nodeInfo))});let c=!1;const f=()=>{c=!0,setTimeout(()=>{c=!1},100)},g=q(()=>{const T=[],z=O=>{var M;if(O.parent){let F=(M=O.parent)==null?void 0:M.children.indexOf(O);do{F+=1;const W=O.parent.children[F];if(W){if(!W.hidden)return!0}else break}while(!0)}return!1},k=t()?"right":"left",V=n()?"top":"bottom";let w=e.nodeInfo;for(;w;){const O=(w.level-2)*r()+s(),M=z(w),F=()=>{T.push({style:`${k}:${O}px;${V}:${M?"0":"50%"}`})};w===e.nodeInfo?w.level>1&&F():M&&F(),w=w.parent}return T});var _=ut();j(()=>Se(_,`${Te("tree-node",o(),l()&&"tree-node--with-tree-line")??""} svelte-gfld7i`));var v=A(_);K(v,l,T=>{var z=ft(),k=D(z);fe(k,17,()=>u(g),me,(w,O)=>{var M=ct();j(()=>G(M,"style",u(O).style)),b(w,M)});var V=U(k,2);K(V,()=>e.nodeInfo.level>1,w=>{var O=ht();j(()=>G(O,"style",u(h))),b(w,O)}),b(T,z)});var I=U(v,2),y=A(I);se(y,()=>e.tn_slot,()=>({data:e.nodeInfo.nodeData,info:e.nodeInfo})),E(I),E(_),j(()=>G(_,"style",`${d()} ${u(a)}`)),b(i,_),ne()}function ke(i){return Object.prototype.toString.call(i)==="[object Array]"}function vt(i){return i[i.length-1]}function mt(i,e){let t,n=0;for(;(t=i.indexOf(e))>-1;)i.splice(t,1),n++;return n}function It(i,e,t){i.hasOwnProperty(e)||(i[e]=t)}function _t(i,e){return Object.keys(e).forEach(t=>{It(i,t,e[t])}),i}function xt(i){const e={};return Object.keys(i).forEach(t=>{i[t]!==void 0&&(e[t]=i[t])}),e}function p(i,e,t={}){t=_t({...t},{childrenKey:"children"});const n=t.childrenKey,r=ke(i)?i:[i];class l{}const s=(o,d,a)=>{t.reverse&&(o=o.slice(),o.reverse());const h=o.length;for(let c=0;c<h;c++){const f=o[c],g=t.reverse?h-c-1:c,_=a?[...a,g]:[];t.childFirst&&f[n]!=null&&s(f[n],f,_);const v=e(f,g,d,_);if(v===!1)throw new l;if(v==="skip children")continue;if(v==="skip siblings")break;t.childFirst||f[n]!=null&&s(f[n],f,_)}};try{s(r,null,ke(i)?[]:null)}catch(o){if(!(o instanceof l))throw o}}function St(i,e){const t={childrenKey:"children"};e&&Object.assign(t,e);const n=t.childrenKey,r=t.nodeHandler,l=new Oe;return l.childrenKey=n,p(i,(s,o,d,a)=>{let h=Object.assign({},s);h[n]&&(h[n]=[]),r&&(h=r(h,{oldNode:s,index:o,parent:d,path:a})),l.set(a,h)},{childrenKey:n}),l.data}class Oe{constructor(e=[]){C(this,"data");C(this,"childrenKey","children");this.data=e}get rootChildren(){const{childrenKey:e}=this,{data:t}=this;return ke(t)?t:t[e]}*iteratePath(e,t={}){const{childrenKey:n,rootChildren:r}=this;if(t.reverse){const l=[...this.iteratePath(e,{...t,reverse:!1})];l.reverse();for(const{path:s,node:o}of l)yield{path:s,node:o}}else{let l=[],s=r;for(const o of e){const d=[...l,o],a=s[o];yield{path:d,node:a},l=d,s=a[n]}}}getFamily(e){const t=[];for(const{node:n}of this.iteratePath(e))t.push(n);return t}get(e){return vt(this.getFamily(e))}getParentAndIndex(e){const t=e.slice(),n=t.pop();return{parent:this.get(t),index:n,parentPath:t}}getParent(e){return this.getParentAndIndex(e).parent}set(e,t){if(e===null||e.length===0)this.data=t;else{const{childrenKey:n}=this;let{rootChildren:r}=this;const{parent:l,index:s}=this.getParentAndIndex(e);let o;e.length===1?(r||(this.data?this.data[n]=[]:this.data=[]),o=r):(l[n]||(l[n]=[]),o=l[n]),o[s]=t}}delete(e){const{childrenKey:t,rootChildren:n}=this,{parent:r,index:l}=this.getParentAndIndex(e),s=e.length===1?n:r[t],o=s[l];return s.splice(l,1),o}walk(e,t){const{childrenKey:n,data:r}=this;return p(r,e,n)}clone(e={}){return St(this.data),xt({childrenKey:this.childrenKey,nodeHandler:e.nodeHandler||void 0})}}class ve{constructor(e){C(this,"nodeData");C(this,"expended");C(this,"parent");C(this,"children");C(this,"level");C(this,"hidden");C(this,"checked");C(this,"draggable");C(this,"droppable");C(this,"style");C(this,"class");C(this,"_ignoreCheckedOnce");this.nodeData=(e==null?void 0:e.nodeData)||null,this.expended=(e==null?void 0:e.expended)||!1,this.parent=(e==null?void 0:e.parent)||null,this.children=(e==null?void 0:e.children)||[],this.level=(e==null?void 0:e.level)||0,this.hidden=(e==null?void 0:e.hidden)||!1,this.checked=(e==null?void 0:e.checked)||!1,this.draggable=(e==null?void 0:e.draggable)||null,this.droppable=(e==null?void 0:e.droppable)||null,this.style=(e==null?void 0:e.style)||null,this.class=(e==null?void 0:e.class)||null,this._ignoreCheckedOnce=e==null?void 0:e._ignoreCheckedOnce}toggleExpand(){console.log("nodeInfo.toggleExpand"),this.expended=!this.expended,console.log(this.expended)}toggleChecked(){console.log("nodeInfo.toggleChecked"),this.checked=!this.checked,console.log(this.checked)}}class Ue{constructor(e){C(this,"childrenKey",$);C(this,"defaultOpen",!1);C(this,"noInitialization",!1);this.childrenKey=(e==null?void 0:e.childrenKey)||$,this.defaultOpen=(e==null?void 0:e.defaultOpen)||!1,this.noInitialization=(e==null?void 0:e.noInitialization)||!1}infoNodesHandler(e){return e}InfoNodesFlatHandler(e){return e}afterSetInfoNode(e,t,n){}afterRemoveInfoNode(e){}infoHandler(e){return e}}class bt extends Ue{constructor(t){super(t);C(this,"preProcessor")}filter(t,n){return t?t(n):n}infoHandler(t){this.preProcessor&&(t=this.preProcessor(t));let n=N(t);return this.filter(super.infoHandler,n)}infoNodesHandler(t){let n=N(t);return this.filter(super.infoNodesHandler,n)}InfoNodesFlatHandler(t){let n=N(t);return this.filter(super.InfoNodesFlatHandler,n)}}const $="children";var Ie,_e,xe;class yt{constructor(e){C(this,"nodeData");be(this,Ie,J(N([])));be(this,_e,J(N([])));be(this,xe,J(null));C(this,"options");C(this,"initialized",!1);this.options=e||new Ue}get nodeInfos(){return u(oe(this,Ie))}set nodeInfos(e){L(oe(this,Ie),N(e))}get nodeInfosToRender(){return u(oe(this,_e))}set nodeInfosToRender(e){L(oe(this,_e),N(e))}get _infosMap(){return u(oe(this,xe))}set _infosMap(e){L(oe(this,xe),N(e))}init(){if(!this.initialized){this.initialized=!0,console.log("TreeProcessor.init() called");const e=this.options.childrenKey,t=new Oe([]);this._infosMap=new Map,p(this.nodeData,(r,l,s,o)=>{const d=this.options.infoHandler(new ve({nodeData:r,expended:!!this.options.defaultOpen,parent:t.getParent(o),children:[],level:o.length}));this._infosMap.set(r,d),t.set(o,d)},{childrenKey:e}),console.log("td",t),this.nodeInfos=this.options.infoNodesHandler(t.rootChildren);const n=[];t.walk(r=>{n.push(r)}),console.log("rootChildren",t.rootChildren),this.nodeInfosToRender=this.options.InfoNodesFlatHandler(n)}}getNodeInfo(e){const t=this._infosMap.get(e);if(!t)throw new De("NodeInfo not found");return t}has(e){if(e instanceof ve)return this.nodeInfosToRender.indexOf(e)>-1;try{return(!!this.getNodeInfo(e)).valueOf()}catch(t){if(t instanceof De)return!1;throw t}}_getPathByStat(e){if(e===null)return[];const n=this.getSiblings(e).indexOf(e);return[...e.parent?this._getPathByStat(e.parent):[],n]}afterOneCheckChanged(e){const{checked:t}=e;if(e._ignoreCheckedOnce)return delete e._ignoreCheckedOnce,!1;const n=r=>{const l=r.parent;if(l){let s=!1,o=!1;for(const a of l.children)if(a.checked||a.checked===0)s=!0;else if(o=!0,s&&o)break;const d=o?s?0:!1:!0;l.checked!==d&&(this._ignoreCheckedOnce(l),l.checked=d),n(l)}};return n(e),p(e.children,r=>{r.checked!==t&&(this._ignoreCheckedOnce(r),r.checked=t)},{childrenKey:$}),!0}_ignoreCheckedOnce(e){e._ignoreCheckedOnce=!0,setTimeout(()=>{e._ignoreCheckedOnce&&(e._ignoreCheckedOnce=!1)},100)}isVisible(e){const t=e instanceof ve?e:this.getNodeInfo(e),n=r=>!r||!r.hidden&&r.expended&&n(r.parent);return!!(!t.hidden&&n(t.parent))}updateCheckboxes(){p(this.nodeInfos,e=>{if(e.children&&e.children.length>0){const t=e.children.every(n=>n.checked);e.checked!==t&&(this._ignoreCheckedOnce(e),e.checked=t)}},{childFirst:!0,childrenKey:$})}getChecked(e=!1){return this.nodeInfosToRender.filter(t=>t.checked||e&&t.checked===0)}getUnchecked(e=!0){return this.nodeInfosToRender.filter(t=>e?!t.checked:t.checked===!1)}openAll(){for(const e of this.nodeInfosToRender)e.expended=!0}closeAll(){for(const e of this.nodeInfosToRender)e.expended=!1}openNodeAndParents(e){const t=e instanceof ve?e:this.getNodeInfo(e);for(const n of this.iterateParent(t,{withSelf:!0}))n.expended=!0}_calcFlatIndex(e,t){let n=e?this.nodeInfosToRender.indexOf(e)+1:0;const r=e?e.children:this.nodeInfos;for(let l=0;l<t;(l+=1)-1)n+=this._count(r[l]);return n}add(e,t,n){if(this.has(e))throw"Can't add because data exists in tree";const r=t?t.children:this.nodeInfos;n==null&&(n=r.length);const l=this.options.infoHandler(new ve({expended:!!this.options.defaultOpen,nodeData:e,parent:t||null,children:[],level:t?t.level+1:1}));this._setPosition(l,t||null,n);const s=e[this.childrenKey];if(s){const o=s.slice();for(const d of o)this.add(d,l)}}remove(e){const t=this.getSiblings(e);if(t.includes(e)){mt(t,e);const n=this._flat(e);this.nodeInfosToRender.splice(this.nodeInfosToRender.indexOf(e),n.length);for(const r of n)this._infosMap.delete(r.nodeData);return this.options.afterRemoveInfoNode(e),!0}return!1}getSiblings(e){const{parent:t}=e;return t?t.children:this.nodeInfos}_setPosition(e,t,n){(t?t.children:this.nodeInfos).splice(n,0,e),e.parent=t,e.level=t?t.level+1:1;const l=this._calcFlatIndex(t,n),s=this._flat(e);this.nodeInfosToRender.splice(l,0,...s);for(const o of s)this._infosMap.has(o.nodeData)||this._infosMap.set(o.nodeData,o);p(e,(o,d,a)=>{a&&(o.level=a.level+1)},{childrenKey:$}),this.options.afterSetInfoNode(e,t,n)}*iterateParent(e,t){let n=t!=null&&t.withSelf?e:e.parent;for(;n;)yield n,n=n.parent}move(e,t,n){if(this.has(e)){if(e.parent===t&&this.getSiblings(e).indexOf(e)===n)return!1;if(e===t)throw new Error("Can't move node to itself");if(t&&e.level<t.level){let r;for(const l of this.iterateParent(t))if(l.level===e.level){r=l;break}if(e===r)throw new Error("Can't move node to its descendant")}this.remove(e)}return this._setPosition(e,t,n),!0}_flat(e){const t=[];return p(e,n=>{t.push(n)},{childrenKey:$}),t}_count(e){return this._flat(e).length}getData(e,t){const{childrenKey:n}=this.options,r=new Oe([]);return r.childrenKey=n,p(t||this.nodeInfos,(l,s,o,d)=>{let a={...l.nodeData,[n]:[]};e&&(a=e(a)),r.set(d,a)},{childrenKey:$}),r.data}}Ie=new WeakMap,_e=new WeakMap,xe=new WeakMap;class De extends Error{constructor(e){super(e),this.name="StatNotFoundError"}}function zt(i,e){const t=new bt(e),n=new yt(t);return t.noInitialization||n.init(),n}var Ct=P('<div class="drag-placeholder he-tree-drag-placeholder"><!></div>');function Jt(i,e){te(e,!0);let t=x(e,"processor",23,()=>zt([],{noInitialization:!0}));x(e,"updateBehavior",3,"modify"),x(e,"childrenKey",3,$),x(e,"textKey",3,"text");let n=x(e,"indent",3,20),r=x(e,"virtualization",3,!1);x(e,"virtualizationPrerenderCount",3,20),x(e,"defaultOpen",3,!0);let l=x(e,"rtl",3,!1),s=x(e,"btt",3,!1);x(e,"nodeKey",3,"index");let o=x(e,"treeLine",3,!1),d=x(e,"treeLineOffset",3,8);x(e,"class",3,"");let a=x(e,"style",3,""),h=J(N([])),c=null,f=!1,g={};he(()=>{e.model,console.log("model change detected"),console.log("Initializing model"),t().nodeData=e.model,t().init(),L(h,N(t().nodeInfosToRender))});function _(){let k=u(h)||[];return s()&&(k=k.slice().reverse()),k.filter(V=>v(V))}function v(k){return t().isVisible(k)}var I=q(()=>Te("he-tree",l()&&"he-tree--rtl rtl",f)),y=q(()=>!r()),T=q(_),z=q(()=>{var k;return((k=t().nodeInfos)==null?void 0:k.length)||0});at(i,{get class(){return u(I)},get style(){return a()},height:500,get isDisabled(){return u(y)},width:"auto",get model(){return u(T)},get modelCount(){return u(z)},itemSize:25,vl_slot:(V,w)=>{let O=()=>w==null?void 0:w().item;var M=Q(),F=D(M);K(F,O,W=>{var de=q(()=>Te(O().class,{"drag-placeholder-wrapper":O().nodeData===g,"dragging-node":O()===c}));gt(W,{get class(){return u(de)},get style(){return O().style},get nodeInfo(){return O()},get rtl(){return l()},get btt(){return s()},get indent(){return n()},get treeLine(){return o()},get treeLineOffset(){return d()},get processor(){return t()},onNodeOpened:H=>e.onNodeOpened&&e.onNodeOpened(H),onNodeclosed:H=>e.onNodeClosed&&e.onNodeClosed(H),onNodeChecked:H=>e.onNodeChecked&&e.onNodeChecked(H),tn_slot:(H,ue=Xe)=>{var ie=Q(),Ce=D(ie);K(Ce,()=>ue().data===g,ge=>{var m=Ct(),S=A(m);K(S,()=>e.placeholder,R=>{var Z=Q(),Y=D(Z);se(Y,()=>e.placeholder),b(R,Z)}),E(m),b(ge,m)},ge=>{var m=Q(),S=D(m);se(S,()=>e.tree_slot,ue),b(ge,m)}),b(H,ie)}})}),b(V,M)}}),ne()}var Tt=P('<div class="item svelte-1s0qzrn"><!></div>'),kt=P('<section class="svelte-1s0qzrn"><!></section>'),Ot=P("<b> </b> <!>",1);function Ve(i,e){te(e,!0);let t=x(e,"tree",15),n=x(e,"node",7);const r=300;function l(c){n().children=c.detail.items}function s(c){n().children=c.detail.items,t({...t()})}var o=Ot(),d=D(o),a=A(d);E(d);var h=U(d,2);K(h,()=>{var c;return(c=n())==null?void 0:c.children},c=>{var f=kt(),g=A(f);K(g,()=>n().children,_=>{var v=Q(),I=D(v);fe(I,25,()=>n().children,y=>y.id,(y,T)=>{var z=Tt(),k=A(z);Ve(k,{get tree(){return t()},set tree(V){t(V)},get node(){return t()[u(T).id]}}),E(z),Ge(z,()=>$e,()=>({duration:r})),b(y,z)}),b(_,v)}),E(f),pe(f,(_,v)=>et(_,v),()=>({items:n().children||[],flipDurationMs:r,centreDraggedOnCursor:!0})),ee("consider",f,l),ee("finalize",f,s),b(c,f)}),j(()=>{var c,f;G(d,"style",`color:${((c=n())==null?void 0:c.color)??""}`),ze(a,(f=n())==null?void 0:f.name)}),b(i,o),ne()}var wt=P("<h3>Try dragging node2 into node3 and then node4 into node2</h3> <!>",1);function Wt(i){let e=J(N({node1:{name:"node 1",children:[{id:"node2"},{id:"node3"},{id:"node4"}],id:"node1"},node2:{name:"node 2",children:[{id:"node5"},{id:"node6"},{id:"node7"},{id:"node8"}],id:"node2"},node3:{name:"node 3",children:[{id:"node9"},{id:"node10"},{id:"node11"},{id:"node12"}],id:"node3"},node4:{name:"node 4",children:[{id:"node13"},{id:"node14"},{id:"node15"},{id:"node16"}],id:"node4",color:"salmon"}}));for(let r=5;r<17;(r+=1)-1)u(e)[`node${r}`]={id:`node${r}`,name:`item ${r}`};u(e).node10.color="steelblue",u(e).node11.color="steelblue",u(e).node14.color="orange",u(e).node15.color="orange",u(e).node6.color="forestgreen";var t=wt(),n=U(D(t),2);Ve(n,{get node(){return u(e).node1},get tree(){return u(e)},set tree(r){L(e,N(r))}}),b(i,t)}var Pt=P("<div></div>");function Me(i,e){te(e,!0);const{getDragged:t}=Ke("dragging");let n=J(!1);function r(h){return 1}function l(h){!h.target||!h.target.id||(r(h.target.id),L(n,!0))}function s(h){!h.target||!h.target.id||(r(h.target.id)>0&&e.ondrop({oldPosition:t(),newPosition:h.target.id.split("-")}),o())}function o(){L(n,!1)}function d(){return`dropzone-${e.prefix}`}var a=Pt();j(()=>G(a,"id",d())),j(()=>Se(a,`${`dropzone ${u(n)?"active":"idle"}`??""} svelte-1n7j4p5`)),ee("dragleave",a,()=>o()),ee("dragenter",a,h=>l(h)),ee("drop",a,h=>s(h)),ee("dragover",a,()=>!1),b(i,a),ne()}var At=P("<span> </span>");function Be(i,e){var t=At(),n=A(t);E(t),j(()=>{Se(t,`${`clickable ${e.isLeafNode?"isLeafNode":""}`??""} svelte-13dhc3a`),ze(n,e.label)}),b(i,t)}const Et=Object.freeze(Object.defineProperty({__proto__:null,default:Be},Symbol.toStringTag,{value:"Module"}));function Nt(i,e){e(!e())}function Rt(i,e,t){var n;(n=e.onselected)==null||n.call(e,`${t()}`.split("-"))}var Dt=P("<i></i>"),Mt=P('<li class="svelte-1bsomvo"><!></li>'),Lt=P('<ul class="svelte-1bsomvo"><!> <li class="svelte-1bsomvo"><!></li></ul>'),Kt=P('<!>  <div draggable="true"><!> <div class="node-wrapper svelte-1bsomvo"><!></div></div> <!>',1);function je(i,e){te(e,!0),Ke("dragging");let t=x(e,"expanded",7,!1),n=x(e,"prefix",3,""),r=q(()=>!Array.isArray(e.children)),l=q(()=>n()===null);function s(){}function o(I){var y;!I.target||!I.target.id||(y=e.ondragstart)==null||y.call(e,I.target.id.split("-"))}function d(I){return n()!==null?`${n()}-${I}`:I}var a=Kt(),h=D(a);K(h,()=>!u(l),I=>{Me(I,{get ondrop(){return e.ondrop},get prefix(){return n()}})});var c=U(h,2),f=A(c);K(f,()=>!u(r),I=>{var y=Dt();y.__click=[Nt,t],j(()=>Se(y,`${`clickable toggle-icon ${t()?e.internalOptions.collapseClass:e.internalOptions.expandClass}`??""} svelte-1bsomvo`)),b(I,y)});var g=U(f,2);g.__click=[Rt,e,n];var _=A(g);Be(_,{get label(){return e.label},get isLeafNode(){return u(r)}}),E(g),E(c);var v=U(c,2);K(v,()=>t()&&!u(r),I=>{var y=Lt(),T=A(y);fe(T,17,()=>e.children,me,(w,O,M)=>{var F=Mt(),W=A(F),de=q(()=>d(M));je(W,Fe(()=>u(O),{get internalOptions(){return e.internalOptions},get expanded(){return t()},get prefix(){return u(de)},get onselected(){return e.onselected},ondragenter:!0,ondragleave:!0,get ondragstart(){return e.ondragstart},ondragend:!0,get ondrop(){return e.ondrop}})),E(F),b(w,F)});var z=U(T,2),k=A(z),V=q(()=>{var w;return d((w=e.children)==null?void 0:w.length)});Me(k,{get ondrop(){return e.ondrop},get prefix(){return u(V)}}),E(z),E(y),b(I,y)}),j(()=>G(c,"id",n())),ee("dragstart",c,I=>o(I)),ee("dragend",c,s),b(i,a),ne()}we(["click"]);var Ft=P('<div class="tree"><!></div>');function Yt(i,e){te(e,!0);let t={labelFormatter:()=>lt(()=>Promise.resolve().then(()=>Et),void 0),collapseClass:"chevron bottom",expandClass:"chevron right"};Le(async()=>{t=Object.assign(t,e.options)});let n;tt("dragging",{getDragged:()=>n});function r(f){var g;(g=e.onselected)==null||g.call(e,s(f.slice(),e.treeItems))}function l(f){n=f.detail}function s(f,g){if(f.length===0)return g;const _=f.shift(),v=g.children[_];return v.hasOwnProperty("children")?s(f,v):v}function o(f,g){let _=[];for(let v=0;v<f.length;(v+=1)-1)f[v]===g&&_.push(v);return _}function d(f,g,_,v){if(f!==g)return f.children.indexOf(v);const I=o(f.children,v);if(I.length!==2){console.error("found too few/too many indexes",I);return}return I.find(y=>`${y}`!=`${_.slice().pop()}`)}function a(f){var z;const g=f.detail.oldPosition.slice(),_=f.detail.newPosition.slice(1),v=s(g.slice(0,g.length-1),e.treeItems),I=s(_.slice(0,_.length-1),e.treeItems),y=s(g.slice(),e.treeItems);I.children.splice(_.slice().pop(),0,y);const T=d(v,I,_.slice(),y);v.children.splice(T,1),n=null,(z=e.onmodelChanged)==null||z.call(e,e.treeItems)}var h=Ft(),c=A(h);K(c,()=>e.treeItems,f=>{je(f,Fe(()=>e.treeItems,{internalOptions:t,expanded:!0,onselected:g=>r(g.detail),ondragstart:g=>l(g),ondrop:a}))}),E(h),b(i,h),ne()}const Ht=(i,e)=>{e(e().expanded=!e().expanded,!0)},ye=(i,e,t)=>{e(e().checked=!e().checked,!0),t.ontoggle&&t.ontoggle(e())};var Ut=P('<div class="item"><!></div>'),Vt=P('<input type="checkbox"> <span class="arrow svelte-9p8428"></span> <span> </span> <!>',1),Bt=P('<input type="checkbox"> <span> </span>',1),jt=P('<ul class="svelte-9p8428"><li><!></li></ul>');function Qe(i,e){te(e,!0);let t=x(e,"tree",15);var n=jt(),r=A(n),l=A(r);K(l,()=>t().children,s=>{var o=Vt(),d=D(o);Ee(d),d.__click=[ye,t,e];var a=U(d,2);a.__click=[Ht,t];var h=U(a,2);h.__click=[ye,t,e];var c=A(h);E(h);var f=U(h,2);K(f,()=>t().expanded,g=>{var _=Q(),v=D(_);fe(v,17,()=>t().children,me,(I,y)=>{var T=Ut(),z=A(T);Qe(z,{get tree(){return u(y)},get ontoggle(){return e.ontoggle}}),E(T),b(I,T)}),b(g,_)}),j(()=>{G(d,"data-label",t().label),Ne(d,t().checked),d.indeterminate=t().indeterminate,nt(a,"arrowDown",t().expanded),ze(c,t().label)}),b(s,o)},s=>{var o=Bt(),d=D(o);Ee(d),d.__click=[ye,t,e];var a=U(d,2);a.__click=[ye,t,e];var h=A(a);E(a),j(()=>{G(d,"data-label",t().label),Ne(d,t().checked),d.indeterminate=t().indeterminate,ze(h,t().label)}),b(s,o)}),E(r),E(n),b(i,n),ne()}we(["click"]);var Qt=P("<div><!></div>");function Xt(i){let e=J(N({label:"root",expanded:!0,children:[{label:"node A",children:[{label:"node Aa"},{label:"node Ab",checked:!0}]},{label:"node B"},{label:"node C"},{label:"node D"}]}));const t={};function n(a=u(e)){if(a.children)for(const h of a.children)t[h.label]=a,n(h)}n();function r(a,h=!0){if(a.children){for(const c of a.children)h&&(c.checked=!!a.checked),r(c,h);a.indeterminate=a.children.some(c=>c.indeterminate)||a.children.some(c=>!!c.checked)&&a.children.some(c=>!c.checked)}}function l(a,h=!0){var f,g;let c=t[a.label];for(r(a,h);c;){if((f=c.children)==null?void 0:f.every(v=>!!v.checked))c.indeterminate=!1,c.checked=!0;else{const v=(g=c.children)==null?void 0:g.some(I=>!!I.checked||I.indeterminate);c.indeterminate=!!v,c.checked=!1}c=t[c.label]}}function s(){l(u(e),!1)}s();var o=Qt(),d=A(o);Qe(d,{get tree(){return u(e)},set tree(a){L(e,N(a))},ontoggle:l}),E(o),b(i,o)}export{Wt as A,Jt as T,lt as _,Xt as a,Yt as b};
