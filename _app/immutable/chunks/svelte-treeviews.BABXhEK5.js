var be=Object.defineProperty;var Pe=(l,e,t)=>e in l?be(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var x=(l,e,t)=>Pe(l,typeof e!="symbol"?e+"":e,t);import{d as ke,p as c,c as X,r as G,t as de,s as xe,a as Te,b as T,e as p,f as Ie,g as ae,h as R,u as se,o as Ee,i as Me,j as S,k as B,l as Fe,m as W,n as J,q as ze,v as L,w as D,x as me,y as ge,z as Re,A as fe,B as De,C as Y,D as te,E as Ke,F as le}from"./external.yBaoh3s7.js";var Le=p('<a><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="svelte-1t1owd"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42Z"></path></svg></a>');function rt(l,e){let t=c(e,"open",3,!1),n=c(e,"class",3,""),s=c(e,"onclick",3,()=>{});var i=Le();i.__click=function(...o){const a=s();return a==null?void 0:a.apply(this,o)};var r=X(i);X(r),G(r),G(i),de(()=>{xe(i,`${`treeicon ${n()}`??""} svelte-1t1owd`),Te(i,"open",t())}),T(l,i)}ke(["click"]);class Ne{constructor(e,t,n,s){x(this,"model");x(this,"modelCount");x(this,"itemSize");x(this,"estimatedItemSize");x(this,"itemSizeAndPositionData");x(this,"lastMeasuredIndex");x(this,"totalSize");this.model=e,this.itemSize=n,this.modelCount=t,this.estimatedItemSize=s,this.itemSizeAndPositionData=[],this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig(e,t,n){t!==void 0&&(this.modelCount=t),n!==void 0&&(this.estimatedItemSize=n),e!==void 0&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!==void 0?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.modelCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:t}=this;return typeof t=="function"?this.model?t(this.model[e],e):0:Array.isArray(t)?t[e]:t}computeTotalSizeAndPositionData(){let e=0;for(let t=0;t<this.modelCount;t++){const n=this.getSize(t),s=e;e+=n,this.itemSizeAndPositionData[t]={offset:s,size:n}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){return e<0||e>=this.modelCount?{size:0,offset:0}:this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const t=this.getSizeAndPositionOfLastMeasuredItem();let n=t.offset+t.size;for(let s=this.lastMeasuredIndex+1;s<=e;s++){const i=this.getSize(s);if(i===void 0||isNaN(i))throw Error(`Invalid size returned for index ${s} of value ${i}`);this.itemSizeAndPositionData[s]={offset:n,size:i},n+=i}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getEstimatedItemSize(){return this.estimatedItemSize||typeof this.itemSize=="number"&&this.itemSize||50}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.modelCount-this.lastMeasuredIndex-1)*this.getEstimatedItemSize()}getUpdatedOffsetForIndex(e=ie.START,t,n,s){if(t<=0)return 0;const i=this.getSizeAndPositionForIndex(s),r=i.offset,o=r-t+i.size;let a;switch(e){case ie.END:a=o;break;case ie.CENTER:a=r-(t-i.size)/2;break;case ie.START:a=r;break;default:a=Math.max(o,Math.min(r,n))}const f=this.getTotalSize();return Math.max(0,Math.min(f-t,a))}getVisibleRange(e=0,t,n){if(this.getTotalSize()===0)return{start:0,end:0};const i=t+e;let r=this.findNearestItem(t);if(r===void 0)throw Error(`Invalid offset ${t} specified`);const o=this.getSizeAndPositionForIndex(r);t=o.offset+o.size;let a=r;for(;t<i&&a<this.modelCount-1;)a++,t+=this.getSizeAndPositionForIndex(a).size;return n&&(r=Math.max(0,r-n),a=Math.min(a+n,this.modelCount-1)),{start:r,end:a}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const t=this.getSizeAndPositionOfLastMeasuredItem(),n=Math.max(0,this.lastMeasuredIndex);return t.offset>=e?this.binarySearch(0,n,e):this.exponentialSearch(n,e)}binarySearch(e,t,n){let s=0,i=0;for(;e<=t;){if(s=e+Math.floor((t-e)/2),i=this.getSizeAndPositionForIndex(s).offset,i===n)return s;i<n?e=s+1:i>n&&(t=s-1)}return e>0?e-1:0}exponentialSearch(e,t){let n=1;for(;e<this.modelCount&&this.getSizeAndPositionForIndex(e).offset<t;)e+=n,n*=2;return this.binarySearch(Math.floor(e/2),Math.min(e,this.modelCount-1),t)}}var He=p('<div><!> <div class="virtual-list-inner svelte-f32i87"><!></div> <!></div>');const Ue=(()=>{let l=!1;try{const e=Object.defineProperty({},"passive",{get(){return l={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return l})();function Ve(l,e){Ie(e,!0);const t=c(e,"width",3,"100%"),n=c(e,"model",11,()=>[]),s=c(e,"windowOverPadding",3,3),i=c(e,"scrollDirection",11,()=>k.VERTICAL),r=c(e,"scrollToAlignment",11,()=>ie.AUTO),o=c(e,"scrollToBehaviour",11,()=>Ce.INSTANT),a=c(e,"class",3,"");c(e,"style",3,"");const f=De(e,["$$slots","$$events","$$legacy","height","width","model","modelCount","itemSize","estimatedItemSize","getKey","isDisabled","scrollToIndex","scrollOffset","windowOverPadding","scrollDirection","scrollToAlignment","scrollToBehaviour","footer","vl_slot","header","onVisibleRangeUpdate","onAfterScroll","class","style"]),O={[k.VERTICAL]:"top",[k.HORIZONTAL]:"left"},E={[k.VERTICAL]:"scrollTop",[k.HORIZONTAL]:"scrollLeft"},m=new Ne(n(),e.modelCount,e.itemSize,e.estimatedItemSize);let A=!1,I,w=ae(R([])),u=ae(R({offset:e.scrollOffset||e.scrollToIndex!==void 0&&e.modelCount&&z(e.scrollToIndex)||0,scrollChangeReason:ne.REQUESTED})),N={},C={scrollToIndex:e.scrollToIndex,scrollToAlignment:r(),scrollOffset:e.scrollOffset,modelCount:e.modelCount,itemSize:e.itemSize,estimatedItemSize:e.estimatedItemSize},H={},j=ae(""),$=ae("");se(()=>{e.scrollToIndex,r(),e.scrollOffset,e.modelCount,e.itemSize,e.estimatedItemSize,g()}),se(()=>{S(u),b()}),se(()=>{e.height,t(),A&&v(0)}),(()=>{if(i()===k.VERTICAL&&typeof e.height!="number")throw new Error("virtual list's height must be a number when scrollDirection is 'vertical', got "+e.height);if(i()===k.HORIZONTAL&&typeof t()!="number")throw new Error("virtual list's width must be a number if scrollDirection is 'horizontal', got "+t());K()})(),Ee(()=>{I.addEventListener("scroll",P,Ue),e.scrollOffset!==void 0?U(e.scrollOffset):e.scrollToIndex!==void 0&&U(z(e.scrollToIndex)),A=!0}),Me(()=>{A&&I.removeEventListener("scroll",P)});function g(){if(!A)return;e.scrollToIndex&&e.scrollOffset&&console.log("VirtualList: scrollToIndex and scrollOffset shall not be used together.");const d=C.scrollToIndex!==e.scrollToIndex||C.scrollToAlignment!==r(),h=C.modelCount!==e.modelCount||C.itemSize!==e.itemSize||C.estimatedItemSize!==e.estimatedItemSize;h&&(m.updateConfig(e.itemSize,e.modelCount,e.estimatedItemSize),v()),C.scrollOffset!==e.scrollOffset?B(u,R({offset:e.scrollOffset||0,scrollChangeReason:ne.REQUESTED})):typeof e.scrollToIndex=="number"&&(d||h)&&B(u,R({offset:z(e.scrollToIndex,r(),e.modelCount),scrollChangeReason:ne.REQUESTED})),C={scrollToIndex:e.scrollToIndex,scrollToAlignment:r(),scrollOffset:e.scrollOffset,modelCount:e.modelCount,itemSize:e.itemSize,estimatedItemSize:e.estimatedItemSize}}function b(){if(!A)return;const{offset:d,scrollChangeReason:h}=S(u);(N.offset!==d||N.scrollChangeReason!==h)&&K(),N.offset!==d&&h===ne.REQUESTED&&U(d),N=S(u)}function K(){if(n().length===0||e.isDisabled)return;const{offset:d}=S(u);let{start:h,end:_}=m.getVisibleRange(i()===k.VERTICAL?e.height:t(),d,s()),Q=[];const V=m.getTotalSize(),he=typeof e.height=="number"?"px":"",q=typeof t()=="number"?"px":"";if(i()===k.VERTICAL?(B(j,`height:${e.height}${he};width:${t()}${q};`),B($,`flex-direction:column;height:${V}px;`)):(B(j,`height:${e.height}${he};width:${t()}${q};`),B($,`min-height:100%;width:${V}px;`)),n()&&h!==void 0&&_!==void 0){for(let F=h;F<=_;F++)Q.push({item:n()[F],index:F,style:y(F)});if(e.onVisibleRangeUpdate){const F=m.getVisibleRange(i()===k.VERTICAL?e.height:t(),d,0);e.onVisibleRangeUpdate({type:"range.update",start:F.start,end:F.end})}}B(w,R(Q))}function U(d){"scroll"in I?I.scroll({[O[i()]]:d,behavior:o()}):I[E[i()]]=d}function v(d=0){H={},m.resetItem(d),K()}function z(d,h=r(),_=e.modelCount){return d<0?d=0:d>=_&&(d=_-1),m.getUpdatedOffsetForIndex(h,i()===k.VERTICAL?e.height:t(),S(u).offset||0,d)}const P=d=>{const h=I[E[i()]];h<0||S(u).offset===h||d.target!==I||(B(u,R({offset:h,scrollChangeReason:ne.OBSERVED})),e.onAfterScroll&&e.onAfterScroll({type:"scroll.update",offset:h,event:d}))};function y(d){if(H[d])return H[d];const{size:h,offset:_}=m.getSizeAndPositionForIndex(d),Q=i()===k.VERTICAL?`left:0;width:100%;height:${h}px;position:absolute;top:${_}px;`:`top:0;width:${h}px;position:absolute;height:100%;left:${_}px;`;return H[d]=Q}var M=He();Fe(M,d=>I=d,()=>I);let ce;var re=X(M);W(re,()=>e.header,d=>{var h=L(),_=D(h);Y(_,()=>e.header),T(d,h)});var ee=J(J(re,!0)),Oe=X(ee);W(Oe,()=>e.isDisabled,d=>{var h=L(),_=D(h);me(_,65,n,ge,(Q,V,he)=>{var q=L(),F=D(q);Y(F,()=>e.vl_slot,()=>te(V)),T(Q,q)}),T(d,h)},d=>{var h=L(),_=D(h);me(_,65,()=>S(w),ge,(Q,V,he)=>{var q=L(),F=D(q),Ae=Ke(()=>({item:te(V).item,style:te(V).style,index:e.getKey?e.getKey(te(V).index):te(V).index}));Y(F,()=>e.vl_slot,()=>S(Ae)),T(Q,q)}),T(d,h)}),G(ee);var we=J(J(ee,!0));return W(we,()=>e.footer,d=>{var h=L(),_=D(h);Y(_,()=>e.footer),T(d,h)}),G(M),de(()=>{ce=Re(M,ce,{class:`virtual-list-wrapper $${a()??""}`,style:S(j),...f},!0,"svelte-f32i87"),fe(ee,"style",S($))}),T(l,M),ze({recomputeSizes:v})}var Ce=(l=>(l.AUTO="auto",l.SMOOTH="smooth",l.INSTANT="instant",l))(Ce||{}),ie=(l=>(l.AUTO="auto",l.START="start",l.CENTER="center",l.END="end",l))(ie||{}),k=(l=>(l.HORIZONTAL="horizontal",l.VERTICAL="vertical",l))(k||{}),ne=(l=>(l[l.OBSERVED=0]="OBSERVED",l[l.REQUESTED=1]="REQUESTED",l))(ne||{}),Be=p('<div class="tree-line tree-vline svelte-1yiqtm5"></div>'),je=p('<div class="tree-line tree-hline svelte-1yiqtm5"></div>'),Qe=p("<!> <!>",1),qe=p('<div><!> <div class="tree-node-inner"><!></div></div>');function Ze(l,e){Ie(e,!0);const t=()=>{};let n=c(e,"rtl",3,!1),s=c(e,"btt",3,!1),i=c(e,"indent",3,20),r=c(e,"treeLine",3,!0),o=c(e,"treeLineOffset",3,10),a=c(e,"class",3,""),f=c(e,"style",3,""),O=c(e,"onopen",3,t),E=c(e,"onclose",3,t),m=c(e,"oncheck",3,t),A=le(()=>`${n()?"paddingRight":"paddingLeft"}:${i()*(e.nodeInfo.level-1)}px`),I=le(()=>`${n()?"right":"left"}:${(e.nodeInfo.level-2)*i()+o()}px`);se(()=>{const g=e.nodeInfo.open;w||(g?O()(e.nodeInfo):E()(e.nodeInfo),u())}),se(()=>{var g;e.nodeInfo.checked,!w&&(g=e.processor)!=null&&g.afterOneCheckChanged(e.nodeInfo)&&m()(e.nodeInfo)});let w=!1;const u=()=>{w=!0,setTimeout(()=>{w=!1},100)},N=le(()=>{const g=[],b=z=>{var P;if(z.parent){let y=(P=z.parent)==null?void 0:P.children.indexOf(z);do{y++;const M=z.parent.children[y];if(M){if(!M.hidden)return!0}else break}while(!0)}return!1},K=n()?"right":"left",U=s()?"top":"bottom";let v=e.nodeInfo;for(;v;){const z=(v.level-2)*i()+o(),P=b(v),y=()=>{g.push({style:`${K}:${z}px;${U}:${P?"0":"50%"}`})};v===e.nodeInfo?v.level>1&&y():P&&y(),v=v.parent}return g});var C=qe(),H=X(C);W(H,r,g=>{var b=Qe(),K=D(b);me(K,65,()=>S(N),ge,(v,z,P)=>{var y=Be();de(()=>fe(y,"style",te(z).style)),T(v,y)});var U=J(J(K,!0));W(U,()=>e.nodeInfo.level>1,v=>{var z=je();de(()=>fe(z,"style",S(I))),T(v,z)}),T(g,b)});var j=J(J(H,!0)),$=X(j);Y($,()=>e.tn_slot,()=>({data:e.nodeInfo.nodeData,info:e.nodeInfo})),G(j),G(C),de(()=>{xe(C,`${`tree-node ${a()}`??""} svelte-1yiqtm5`),fe(C,"style",`${f()} ${S(A)}`),Te(C,"tree-node--with-tree-line",r())}),T(l,C),ze()}function ve(l){return Object.prototype.toString.call(l)==="[object Array]"}function Je(l){return l[l.length-1]}function We(l,e){let t,n=0;for(;(t=l.indexOf(e))>-1;)l.splice(t,1),n++;return n}function Ye(l,e,t){l.hasOwnProperty(e)||(l[e]=t)}function Xe(l,e){return Object.keys(e).forEach(t=>{Ye(l,t,e[t])}),l}function Ge(l){const e={};return Object.keys(l).forEach(t=>{l[t]!==void 0&&(e[t]=l[t])}),e}function Z(l,e,t={}){t=Xe({...t},{childrenKey:"children"});const n=t.childrenKey,s=ve(l)?l:[l];class i{}const r=(o,a,f)=>{t.reverse&&(o=o.slice(),o.reverse());const O=o.length;for(let E=0;E<O;E++){const m=o[E],A=t.reverse?O-E-1:E,I=f?[...f,A]:[];t.childFirst&&m[n]!=null&&r(m[n],m,I);const w=e(m,A,a,I);if(w===!1)throw new i;if(w==="skip children")continue;if(w==="skip siblings")break;t.childFirst||m[n]!=null&&r(m[n],m,I)}};try{r(s,null,ve(l)?[]:null)}catch(o){if(!(o instanceof i))throw o}}function pe(l,e){const t={childrenKey:"children"};e&&Object.assign(t,e);const n=t.childrenKey,s=t.nodeHandler,i=new Se;return i.childrenKey=n,Z(l,(r,o,a,f)=>{let O=Object.assign({},r);O[n]&&(O[n]=[]),s&&(O=s(O,{oldNode:r,index:o,parent:a,path:f})),i.set(f,O)},{childrenKey:n}),i.data}class Se{constructor(e=[]){x(this,"data");x(this,"childrenKey","children");this.data=e}get rootChildren(){const{childrenKey:e}=this,{data:t}=this;return ve(t)?t:t[e]}*iteratePath(e,t={}){const{childrenKey:n,rootChildren:s}=this;if(t.reverse){const i=[...this.iteratePath(e,{...t,reverse:!1})];i.reverse();for(const{path:r,node:o}of i)yield{path:r,node:o}}else{let i=[],r=s;for(const o of e){const a=[...i,o],f=r[o];yield{path:a,node:f},i=a,r=f[n]}}}getFamily(e){const t=[];for(const{node:n}of this.iteratePath(e))t.push(n);return t}get(e){return Je(this.getFamily(e))}getParentAndIndex(e){const t=e.slice(),n=t.pop();return{parent:this.get(t),index:n,parentPath:t}}getParent(e){return this.getParentAndIndex(e).parent}set(e,t){if(e===null||e.length===0)this.data=t;else{const{childrenKey:n}=this;let{rootChildren:s}=this;const{parent:i,index:r}=this.getParentAndIndex(e);let o;e.length===1?(s||(this.data?this.data[n]=[]:this.data=[]),o=s):(i[n]||(i[n]=[]),o=i[n]),o[r]=t}}delete(e){const{childrenKey:t,rootChildren:n}=this,{parent:s,index:i}=this.getParentAndIndex(e),r=e.length===1?n:s[t],o=r[i];return r.splice(i,1),o}walk(e,t){const{childrenKey:n,data:s}=this;return Z(s,e,n)}clone(e={}){return pe(this.data),Ge({childrenKey:this.childrenKey,nodeHandler:e.nodeHandler||void 0})}}function ye(){return{nodeData:null,open:!1,parent:null,children:[],level:0,hidden:!1,checked:!1,draggable:null,droppable:null,style:null,class:null,isNodeInfo:!0}}const oe="children";class $e{constructor(){x(this,"childrenKey","children");x(this,"defaultOpen",!1)}statsHandler(e){return e}statsFlatHandler(e){return e}afterSetStat(e,t,n){}afterRemoveStat(e){}statHandler(e){return e}}class et{constructor(e){x(this,"nodeData");x(this,"nodeInfos");x(this,"nodeInfosFlat");x(this,"_infosMap");x(this,"options");this.nodeInfos=[],this.nodeInfosFlat=[],this._infosMap=null,this.options=e||new $e}init(){const{childrenKey:e}=this.options,t=new Se([]);this._infosMap=new Map,Z(this.nodeData,(s,i,r,o)=>{const a=this.options.statHandler({...ye(),nodeData:s,open:!!this.options.defaultOpen,parent:t.getParent(o),children:[],level:o.length});this._infosMap.set(s,a),t.set(o,a)},{childrenKey:e});const n=[];t.walk(s=>{n.push(s)}),this.nodeInfos=this.options.statsHandler(t.rootChildren),this.nodeInfosFlat=this.options.statsFlatHandler(n)}getStat(e){const t=this._infosMap.get(e);if(!t)throw new _e("NodeInfo not found");return t}has(e){if(e.isNodeInfo)return this.nodeInfosFlat.indexOf(e)>-1;try{return!!this.getStat(e)}catch(t){if(t instanceof _e)return!1;throw t}}_getPathByStat(e){if(e===null)return[];const n=this.getSiblings(e).indexOf(e);return[...e.parent?this._getPathByStat(e.parent):[],n]}afterOneCheckChanged(e){const{checked:t}=e;if(e._ignoreCheckedOnce)return delete e._ignoreCheckedOnce,!1;const n=s=>{const{parent:i}=s;if(i){let r=!1,o=!1;for(const f of i.children)if(f.checked||f.checked===0)r=!0;else if(o=!0,r&&o)break;const a=o?r?0:!1:!0;i.checked!==a&&(this._ignoreCheckedOnce(i),i.checked=a),n(i)}};return n(e),Z(e.children,s=>{s.checked!==t&&(this._ignoreCheckedOnce(s),s.checked=t)},{childrenKey:oe}),!0}_ignoreCheckedOnce(e){e._ignoreCheckedOnce=!0,setTimeout(()=>{e._ignoreCheckedOnce&&(e._ignoreCheckedOnce=!1)},100)}isVisible(e){const t=e.isNodeInfo?e:this.getStat(e),n=s=>!s||!s.hidden&&s.open&&n(s.parent);return!!(!t.hidden&&n(t.parent))}updateCheck(){Z(this.nodeInfos,e=>{if(e.children&&e.children.length>0){const t=e.children.every(n=>n.checked);e.checked!==t&&(this._ignoreCheckedOnce(e),e.checked=t)}},{childFirst:!0,childrenKey:oe})}getChecked(e=!1){return this.nodeInfosFlat.filter(t=>t.checked||e&&t.checked===0)}getUnchecked(e=!0){return this.nodeInfosFlat.filter(t=>e?!t.checked:t.checked===!1)}openAll(){for(const e of this.nodeInfosFlat)e.open=!0}closeAll(){for(const e of this.nodeInfosFlat)e.open=!1}openNodeAndParents(e){const t=e.isNodeInfo?e:this.getStat(e);for(const n of this.iterateParent(t,{withSelf:!0}))n.open=!0}_calcFlatIndex(e,t){let n=e?this.nodeInfosFlat.indexOf(e)+1:0;const s=e?e.children:this.nodeInfos;for(let i=0;i<t;i++)n+=this._count(s[i]);return n}add(e,t,n){if(this.has(e))throw"Can't add because data exists in tree";const s=t?t.children:this.nodeInfos;n==null&&(n=s.length);const i=this.options.statHandler({...ye(),open:!!this.options.defaultOpen,nodeData:e,parent:t||null,children:[],level:t?t.level+1:1});this._setPosition(i,t||null,n);const r=e[this.childrenKey];if(r){const o=r.slice();for(const a of o)this.add(a,i)}}remove(e){const t=this.getSiblings(e);if(t.includes(e)){We(t,e);const n=this._flat(e);this.nodeInfosFlat.splice(this.nodeInfosFlat.indexOf(e),n.length);for(const s of n)this._infosMap.delete(s.nodeData);return this.options.afterRemoveStat(e),!0}return!1}getSiblings(e){const{parent:t}=e;return t?t.children:this.nodeInfos}_setPosition(e,t,n){(t?t.children:this.nodeInfos).splice(n,0,e),e.parent=t,e.level=t?t.level+1:1;const i=this._calcFlatIndex(t,n),r=this._flat(e);this.nodeInfosFlat.splice(i,0,...r);for(const o of r)this._infosMap.has(o.nodeData)||this._infosMap.set(o.nodeData,o);Z(e,(o,a,f)=>{f&&(o.level=f.level+1)},{childrenKey:oe}),this.options.afterSetStat(e,t,n)}*iterateParent(e,t){let n=t!=null&&t.withSelf?e:e.parent;for(;n;)yield n,n=n.parent}move(e,t,n){if(this.has(e)){if(e.parent===t&&this.getSiblings(e).indexOf(e)===n)return!1;if(e===t)throw new Error("Can't move node to it self");if(t&&e.level<t.level){let s;for(const i of this.iterateParent(t))if(i.level===e.level){s=i;break}if(e===s)throw new Error("Can't move node to its descendant")}this.remove(e)}return this._setPosition(e,t,n),!0}_flat(e){const t=[];return Z(e,n=>{t.push(n)},{childrenKey:oe}),t}_count(e){return this._flat(e).length}getData(e,t){const{childrenKey:n}=this.options,s=new Se([]);return s.childrenKey=n,Z(t||this.nodeInfos,(i,r,o,a)=>{let f={...i.nodeData,[n]:[]};e&&(f=e(f)),s.set(a,f)},{childrenKey:oe}),s.data}}class _e extends Error{constructor(e){super(e),this.name="StatNotFoundError"}}function tt(l,e){const t=new et(e);return e.noInitialization||t.init(),t}function ue(l,e){return l?l(e):e}function nt(l,e={}){const t={...e,statHandler(n){let s=R(n);return ue(e.statHandler,s)},statsHandler(n){let s=R(n);return ue(e.statsHandler,s)},statsFlatHandler(n){let s=R(n);return ue(e.statsFlatHandler,s)}};return tt(l,t)}var it=p('<div class="drag-placeholder he-tree-drag-placeholder"><!></div>');function ot(l,e){Ie(e,!0),c(e,"updateBehavior",3,"modify");let t=c(e,"processor",15,()=>nt([],{noInitialization:!0}));c(e,"childrenKey",3,"children"),c(e,"textKey",3,"text");let n=c(e,"indent",3,20);c(e,"virtualization",3,!1),c(e,"virtualizationPrerenderCount",3,20),c(e,"defaultOpen",3,!0);let s=c(e,"rtl",3,!1),i=c(e,"btt",3,!1);c(e,"nodeKey",3,"index");let r=c(e,"treeLine",3,!1),o=c(e,"treeLineOffset",3,8);c(e,"class",3,"");let a=ae(R([])),f=null,O={};se(()=>{e.model,t().nodeData=e.model,t().init(),B(a,R(t().nodeInfos)),t().nodeInfosFlat});var E=le(()=>`he-tree${s()?" he-tree--rtl rtl":""}`),m=le(()=>{var A;return((A=S(a))==null?void 0:A.length)||0});Ve(l,{get class(){return S(E)},get model(){return S(a)},height:500,width:"auto",get modelCount(){return S(m)},itemSize:25,vl_slot:(I,w)=>{let u=()=>w==null?void 0:w().item;var N=L(),C=D(N);W(C,u,H=>{var j=le(()=>(u().class?u().class:"")+(u().data===O?" drag-placeholder-wrapper":"")+(u()===f?" dragging-node":""));Ze(H,{get class(){return S(j)},get style(){return u().style},get nodeInfo(){return u()},get rtl(){return s()},get btt(){return i()},get indent(){return n()},get treeLine(){return r()},get treeLineOffset(){return o()},get processor(){return t()},onopen:g=>e.onNodeOpened&&e.onNodeOpened(g),onclose:g=>e.onNodeClosed&&e.onNodeClosed(g),oncheck:g=>e.onNodeChecked&&e.onNodeChecked(g),tn_slot:(g,b)=>{let K=()=>b==null?void 0:b().data,U=()=>b==null?void 0:b().info;var v=L(),z=D(v);W(z,()=>u().nodeData===O,P=>{var y=it(),M=X(y);W(M,()=>e.placeholder,ce=>{var re=L(),ee=D(re);Y(ee,()=>e.placeholder),T(ce,re)}),G(y),T(P,y)},P=>{var y=L(),M=D(y);Y(M,()=>e.tree_slot,()=>({data:K(),info:U()})),T(P,y)}),T(g,v)}})}),T(I,N)}}),ze()}export{rt as O,ot as T};
