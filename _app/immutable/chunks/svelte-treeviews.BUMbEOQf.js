var Te=Object.defineProperty;var ke=(s,e,t)=>e in s?Te(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var f=(s,e,t)=>ke(s,typeof e!="symbol"?e+"":e,t);import{d as be,p as ze,a as h,s as se,b as w,u as oe,o as Ae,c as Pe,g as v,e as U,f as we,h as he,i as p,j as G,t as ae,k as C,l as ye,m as te,n as B,q as K,r as ge,v as me,w as fe,x as xe,y as ce,z as ee,A as de,B as ve,C as Y,D as Ne,E as Ee}from"./external.ek3irhTW.js";be(["click"]);class Me{constructor(e,t,n,l){f(this,"model");f(this,"modelCount");f(this,"itemSize");f(this,"estimatedItemSize");f(this,"itemSizeAndPositionData");f(this,"lastMeasuredIndex");f(this,"totalSize");this.model=e,this.itemSize=n,this.modelCount=t,this.estimatedItemSize=l,this.itemSizeAndPositionData=[],this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig(e,t,n){t!==void 0&&(this.modelCount=t),n!==void 0&&(this.estimatedItemSize=n),e!==void 0&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!==void 0?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.modelCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:t}=this;return typeof t=="function"?this.model?t(this.model[e],e):0:Array.isArray(t)?t[e]:t}computeTotalSizeAndPositionData(){let e=0;for(let t=0;t<this.modelCount;t++){const n=this.getSize(t),l=e;e+=n,this.itemSizeAndPositionData[t]={offset:l,size:n}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){return e<0||e>=this.modelCount?{size:0,offset:0}:this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const t=this.getSizeAndPositionOfLastMeasuredItem();let n=t.offset+t.size;for(let l=this.lastMeasuredIndex+1;l<=e;l++){const i=this.getSize(l);if(i===void 0||isNaN(i))throw Error(`Invalid size returned for index ${l} of value ${i}`);this.itemSizeAndPositionData[l]={offset:n,size:i},n+=i}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getEstimatedItemSize(){return this.estimatedItemSize||typeof this.itemSize=="number"&&this.itemSize||50}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.modelCount-this.lastMeasuredIndex-1)*this.getEstimatedItemSize()}getUpdatedOffsetForIndex(e=le.START,t,n,l){if(t<=0)return 0;const i=this.getSizeAndPositionForIndex(l),o=i.offset,r=o-t+i.size;let d;switch(e){case le.END:d=r;break;case le.CENTER:d=o-(t-i.size)/2;break;case le.START:d=o;break;default:d=Math.max(r,Math.min(o,n))}const u=this.getTotalSize();return Math.max(0,Math.min(u-t,d))}getVisibleRange(e=0,t,n){if(this.getTotalSize()===0)return{start:0,end:0};const i=t+e;let o=this.findNearestItem(t);if(o===void 0)throw Error(`Invalid offset ${t} specified`);const r=this.getSizeAndPositionForIndex(o);t=r.offset+r.size;let d=o;for(;t<i&&d<this.modelCount-1;)d++,t+=this.getSizeAndPositionForIndex(d).size;return n&&(o=Math.max(0,o-n),d=Math.min(d+n,this.modelCount-1)),{start:o,end:d}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const t=this.getSizeAndPositionOfLastMeasuredItem(),n=Math.max(0,this.lastMeasuredIndex);return t.offset>=e?this.binarySearch(0,n,e):this.exponentialSearch(n,e)}binarySearch(e,t,n){let l=0,i=0;for(;e<=t;){if(l=e+Math.floor((t-e)/2),i=this.getSizeAndPositionForIndex(l).offset,i===n)return l;i<n?e=l+1:i>n&&(t=l-1)}return e>0?e-1:0}exponentialSearch(e,t){let n=1;for(;e<this.modelCount&&this.getSizeAndPositionForIndex(e).offset<t;)e+=n,n*=2;return this.binarySearch(Math.floor(e/2),Math.min(e,this.modelCount-1),t)}}var De=te('<div><!> <div class="virtual-list-inner svelte-f32i87"><!></div> <!></div>');const Fe=(()=>{let s=!1;try{const e=Object.defineProperty({},"passive",{get(){return s={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return s})();function Re(s,e){ze(e,!0);const t=h(e,"width",3,"100%"),n=h(e,"model",11,()=>[]),l=h(e,"windowOverPadding",3,3),i=h(e,"scrollDirection",11,()=>P.VERTICAL),o=h(e,"scrollToAlignment",11,()=>le.AUTO),r=h(e,"scrollToBehaviour",11,()=>_e.INSTANT),d=h(e,"class",3,"");h(e,"style",3,"");const u={[P.VERTICAL]:"top",[P.HORIZONTAL]:"left"},x={[P.VERTICAL]:"scrollTop",[P.HORIZONTAL]:"scrollLeft"},I=new Me(n(),e.modelCount,e.itemSize,e.estimatedItemSize);let S=!1,_,D=se(w([])),m=se(w({offset:e.scrollOffset||e.scrollToIndex!==void 0&&e.modelCount&&z(e.scrollToIndex)||0,scrollChangeReason:ie.REQUESTED})),j={},F={scrollToIndex:e.scrollToIndex,scrollToAlignment:o(),scrollOffset:e.scrollOffset,modelCount:e.modelCount,itemSize:e.itemSize,estimatedItemSize:e.estimatedItemSize},N={},Q=se(""),Z=se("");oe(()=>{e.scrollToIndex,o(),e.scrollOffset,e.modelCount,e.itemSize,e.estimatedItemSize,A()}),oe(()=>{v(m),k()}),oe(()=>{e.height,t(),S&&L(0)}),(()=>{if(i()===P.VERTICAL&&typeof e.height!="number")throw new Error("virtual list's height must be a number when scrollDirection is 'vertical', got "+e.height);if(i()===P.HORIZONTAL&&typeof t()!="number")throw new Error("virtual list's width must be a number if scrollDirection is 'horizontal', got "+t());E()})(),Ae(()=>{_.addEventListener("scroll",O,Fe),e.scrollOffset!==void 0?b(e.scrollOffset):e.scrollToIndex!==void 0&&b(z(e.scrollToIndex)),S=!0}),Pe(()=>{S&&_.removeEventListener("scroll",O)});function A(){if(!S)return;e.scrollToIndex&&e.scrollOffset&&console.log("VirtualList: scrollToIndex and scrollOffset shall not be used together.");const a=F.scrollToIndex!==e.scrollToIndex||F.scrollToAlignment!==o(),c=F.modelCount!==e.modelCount||F.itemSize!==e.itemSize||F.estimatedItemSize!==e.estimatedItemSize;c&&(I.updateConfig(e.itemSize,e.modelCount,e.estimatedItemSize),L()),F.scrollOffset!==e.scrollOffset?U(m,w({offset:e.scrollOffset||0,scrollChangeReason:ie.REQUESTED})):typeof e.scrollToIndex=="number"&&(a||c)&&U(m,w({offset:z(e.scrollToIndex,o(),e.modelCount),scrollChangeReason:ie.REQUESTED})),F={scrollToIndex:e.scrollToIndex,scrollToAlignment:o(),scrollOffset:e.scrollOffset,modelCount:e.modelCount,itemSize:e.itemSize,estimatedItemSize:e.estimatedItemSize}}function k(){if(!S)return;const{offset:a,scrollChangeReason:c}=v(m);(j.offset!==a||j.scrollChangeReason!==c)&&E(),j.offset!==a&&c===ie.REQUESTED&&b(a),j=v(m)}function E(){if(n().length===0||e.isDisabled)return;const{offset:a}=v(m);let{start:c,end:g}=I.getVisibleRange(i()===P.VERTICAL?e.height:t(),a,l()),V=[];const R=I.getTotalSize(),$=typeof e.height=="number"?"px":"",q=typeof t()=="number"?"px":"";if(i()===P.VERTICAL?(U(Q,`height:${e.height}${$};width:${t()}${q};`),U(Z,`flex-direction:column;height:${R}px;`)):(U(Q,`height:${e.height}${$};width:${t()}${q};`),U(Z,`min-height:100%;width:${R}px;`)),n()&&c!==void 0&&g!==void 0){for(let M=c;M<=g;M++)V.push({item:n()[M],index:M,style:H(M)});if(e.onVisibleRangeUpdate){const M=I.getVisibleRange(i()===P.VERTICAL?e.height:t(),a,0);e.onVisibleRangeUpdate({type:"range.update",start:M.start,end:M.end})}}U(D,w(V))}function b(a){"scroll"in _?_.scroll({[u[i()]]:a,behavior:r()}):_[x[i()]]=a}function L(a=0){N={},I.resetItem(a),E()}function z(a,c=o(),g=e.modelCount){return a<0?a=0:a>=g&&(a=g-1),I.getUpdatedOffsetForIndex(c,i()===P.VERTICAL?e.height:t(),v(m).offset||0,a)}const O=a=>{const c=_[x[i()]];c<0||v(m).offset===c||a.target!==_||(U(m,w({offset:c,scrollChangeReason:ie.OBSERVED})),e.onAfterScroll&&e.onAfterScroll({type:"scroll.update",offset:c,event:a}))};function H(a){if(N[a])return N[a];const{size:c,offset:g}=I.getSizeAndPositionForIndex(a),V=i()===P.VERTICAL?`left:0;width:100%;height:${c}px;position:absolute;top:${g}px;`:`top:0;width:${c}px;position:absolute;height:100%;left:${g}px;`;return N[a]=V}var T=De();we(T,a=>_=a,()=>_);var y=he(T);p(y,()=>e.header,a=>{var c=B(),g=K(c);ee(g,()=>e.header),C(a,c)});var J=G(G(y,!0)),ne=he(J);p(ne,()=>e.isDisabled,a=>{var c=B(),g=K(c);ge(g,65,n,me,(V,R,$)=>{var q=B(),M=K(q);ee(M,()=>e.vl_slot,()=>({item:de(R),style:"",index:$})),C(V,q)}),C(a,c)},a=>{var c=B(),g=K(c);ge(g,65,()=>v(D),me,(V,R,$)=>{var q=B(),M=K(q);ee(M,()=>e.vl_slot,()=>({item:de(R).item,style:de(R).style,index:de(R).index})),C(V,q)}),C(a,c)}),fe(J);var ue=G(G(J,!0));return p(ue,()=>e.footer,a=>{var c=B(),g=K(c);ee(g,()=>e.footer),C(a,c)}),fe(T),ae(()=>{xe(T,`virtual-list-wrapper $${d()??""} svelte-f32i87`),ce(T,"style",v(Q)),ce(J,"style",v(Z))}),C(s,T),ye({recomputeSizes:L})}var _e=(s=>(s.AUTO="auto",s.SMOOTH="smooth",s.INSTANT="instant",s))(_e||{}),le=(s=>(s.AUTO="auto",s.START="start",s.CENTER="center",s.END="end",s))(le||{}),P=(s=>(s.HORIZONTAL="horizontal",s.VERTICAL="vertical",s))(P||{}),ie=(s=>(s[s.OBSERVED=0]="OBSERVED",s[s.REQUESTED=1]="REQUESTED",s))(ie||{}),Ke=te('<div class="tree-line tree-vline svelte-gfld7i"></div>'),Le=te('<div class="tree-line tree-hline svelte-gfld7i"></div>'),He=te("<!> <!>",1),Ve=te('<div><!> <div class="tree-node-inner"><!></div></div>');function Ue(s,e){ze(e,!0);const t=()=>{};let n=h(e,"rtl",3,!1),l=h(e,"btt",3,!1),i=h(e,"indent",3,20),o=h(e,"treeLine",3,!0),r=h(e,"treeLineOffset",3,10),d=h(e,"class",3,""),u=h(e,"style",3,""),x=h(e,"onNodeOpened",3,t),I=h(e,"onNodeclosed",3,t),S=h(e,"onNodeChecked",3,t),_=Y(()=>`${n()?"paddingRight":"paddingLeft"}:${i()*(e.nodeInfo.level-1)}px`),D=Y(()=>`${n()?"right":"left"}:${(e.nodeInfo.level-2)*i()+r()}px`);oe(()=>{const k=e.nodeInfo.open;console.log("toggleOpen"),!m&&(k?x()(e.nodeInfo):I()(e.nodeInfo),j())}),oe(()=>{var k;e.nodeInfo.checked,!m&&(k=e.processor)!=null&&k.afterOneCheckChanged(e.nodeInfo)&&S()(e.nodeInfo)});let m=!1;const j=()=>{m=!0,setTimeout(()=>{m=!1},100)},F=Y(()=>{const k=[],E=O=>{var H;if(O.parent){let T=(H=O.parent)==null?void 0:H.children.indexOf(O);do{T++;const y=O.parent.children[T];if(y){if(!y.hidden)return!0}else break}while(!0)}return!1},b=n()?"right":"left",L=l()?"top":"bottom";let z=e.nodeInfo;for(;z;){const O=(z.level-2)*i()+r(),H=E(z),T=()=>{k.push({style:`${b}:${O}px;${L}:${H?"0":"50%"}`})};z===e.nodeInfo?z.level>1&&T():H&&T(),z=z.parent}return k});var N=Ve();ae(()=>xe(N,`${ve("tree-node",d(),o()&&"tree-node--with-tree-line")??""} svelte-gfld7i`));var Q=he(N);p(Q,o,k=>{var E=He(),b=K(E);ge(b,65,()=>v(F),me,(z,O,H)=>{var T=Ke();ae(()=>ce(T,"style",de(O).style)),C(z,T)});var L=G(G(b,!0));p(L,()=>e.nodeInfo.level>1,z=>{var O=Le();ae(()=>ce(O,"style",v(D))),C(z,O)}),C(k,E)});var Z=G(G(Q,!0)),A=he(Z);ee(A,()=>e.tn_slot,()=>({data:e.nodeInfo.nodeData,info:e.nodeInfo})),fe(Z),fe(N),ae(()=>ce(N,"style",`${u()} ${v(_)}`)),C(s,N),ye()}function Ie(s){return Object.prototype.toString.call(s)==="[object Array]"}function Be(s){return s[s.length-1]}function je(s,e){let t,n=0;for(;(t=s.indexOf(e))>-1;)s.splice(t,1),n++;return n}function Qe(s,e,t){s.hasOwnProperty(e)||(s[e]=t)}function Ze(s,e){return Object.keys(e).forEach(t=>{Qe(s,t,e[t])}),s}function Je(s){const e={};return Object.keys(s).forEach(t=>{s[t]!==void 0&&(e[t]=s[t])}),e}function W(s,e,t={}){t=Ze({...t},{childrenKey:"children"});const n=t.childrenKey,l=Ie(s)?s:[s];class i{}const o=(r,d,u)=>{t.reverse&&(r=r.slice(),r.reverse());const x=r.length;for(let I=0;I<x;I++){const S=r[I],_=t.reverse?x-I-1:I,D=u?[...u,_]:[];t.childFirst&&S[n]!=null&&o(S[n],S,D);const m=e(S,_,d,D);if(m===!1)throw new i;if(m==="skip children")continue;if(m==="skip siblings")break;t.childFirst||S[n]!=null&&o(S[n],S,D)}};try{o(l,null,Ie(s)?[]:null)}catch(r){if(!(r instanceof i))throw r}}function qe(s,e){const t={childrenKey:"children"};e&&Object.assign(t,e);const n=t.childrenKey,l=t.nodeHandler,i=new Se;return i.childrenKey=n,W(s,(o,r,d,u)=>{let x=Object.assign({},o);x[n]&&(x[n]=[]),l&&(x=l(x,{oldNode:o,index:r,parent:d,path:u})),i.set(u,x)},{childrenKey:n}),i.data}class Se{constructor(e=[]){f(this,"data");f(this,"childrenKey","children");this.data=e}get rootChildren(){const{childrenKey:e}=this,{data:t}=this;return Ie(t)?t:t[e]}*iteratePath(e,t={}){const{childrenKey:n,rootChildren:l}=this;if(t.reverse){const i=[...this.iteratePath(e,{...t,reverse:!1})];i.reverse();for(const{path:o,node:r}of i)yield{path:o,node:r}}else{let i=[],o=l;for(const r of e){const d=[...i,r],u=o[r];yield{path:d,node:u},i=d,o=u[n]}}}getFamily(e){const t=[];for(const{node:n}of this.iteratePath(e))t.push(n);return t}get(e){return Be(this.getFamily(e))}getParentAndIndex(e){const t=e.slice(),n=t.pop();return{parent:this.get(t),index:n,parentPath:t}}getParent(e){return this.getParentAndIndex(e).parent}set(e,t){if(e===null||e.length===0)this.data=t;else{const{childrenKey:n}=this;let{rootChildren:l}=this;const{parent:i,index:o}=this.getParentAndIndex(e);let r;e.length===1?(l||(this.data?this.data[n]=[]:this.data=[]),r=l):(i[n]||(i[n]=[]),r=i[n]),r[o]=t}}delete(e){const{childrenKey:t,rootChildren:n}=this,{parent:l,index:i}=this.getParentAndIndex(e),o=e.length===1?n:l[t],r=o[i];return o.splice(i,1),r}walk(e,t){const{childrenKey:n,data:l}=this;return W(l,e,n)}clone(e={}){return qe(this.data),Je({childrenKey:this.childrenKey,nodeHandler:e.nodeHandler||void 0})}}class re{constructor(e){f(this,"nodeData");f(this,"open");f(this,"parent");f(this,"children");f(this,"level");f(this,"hidden");f(this,"checked");f(this,"draggable");f(this,"droppable");f(this,"style");f(this,"class");f(this,"_ignoreCheckedOnce");this.nodeData=(e==null?void 0:e.nodeData)||null,this.open=(e==null?void 0:e.open)||!1,this.parent=(e==null?void 0:e.parent)||null,this.children=(e==null?void 0:e.children)||[],this.level=(e==null?void 0:e.level)||0,this.hidden=(e==null?void 0:e.hidden)||!1,this.checked=(e==null?void 0:e.checked)||!1,this.draggable=(e==null?void 0:e.draggable)||null,this.droppable=(e==null?void 0:e.droppable)||null,this.style=(e==null?void 0:e.style)||null,this.class=(e==null?void 0:e.class)||null,this._ignoreCheckedOnce=e==null?void 0:e._ignoreCheckedOnce}toggleOpen(){console.log("nodeInfo.toggleOpen"),this.open=!this.open}toggleChecked(){console.log("nodeInfo.toggleChecked"),this.checked=!this.checked}}class Oe{constructor(e){f(this,"childrenKey",X);f(this,"defaultOpen",!1);f(this,"noInitialization",!1);this.childrenKey=(e==null?void 0:e.childrenKey)||X,this.defaultOpen=(e==null?void 0:e.defaultOpen)||!1,this.noInitialization=(e==null?void 0:e.noInitialization)||!1}infoNodesHandler(e){return e}InfoNodesFlatHandler(e){return e}afterSetInfoNode(e,t,n){}afterRemoveInfoNode(e){}infoHandler(e){return e}}class We extends Oe{constructor(t){super(t);f(this,"preProcessor")}filter(t,n){return t?t(n):n}infoHandler(t){this.preProcessor&&(t=this.preProcessor(t));let n=w(t);return this.filter(super.infoHandler,n)}infoNodesHandler(t){let n=w(t);return this.filter(super.infoNodesHandler,n)}InfoNodesFlatHandler(t){let n=w(t);return this.filter(super.InfoNodesFlatHandler,n)}}const X="children";class Ye{constructor(e){f(this,"nodeData");f(this,"nodeInfos");f(this,"nodeInfosFlat");f(this,"_infosMap");f(this,"options");f(this,"initialized",!1);this.nodeInfos=[],this.nodeInfosFlat=[],this._infosMap=null,this.options=e||new Oe}init(){if(!this.initialized){console.log("TreeProcessor.init() called");const e=this.options.childrenKey,t=new Se([]);this._infosMap=new Map,W(this.nodeData,(l,i,o,r)=>{const d=this.options.infoHandler(new re({nodeData:l,open:!!this.options.defaultOpen,parent:t.getParent(r),children:[],level:r.length}));this._infosMap.set(l,d),t.set(r,d)},{childrenKey:e});const n=[];t.walk(l=>{n.push(l)}),this.nodeInfos=this.options.infoNodesHandler(t.rootChildren),this.nodeInfosFlat=this.options.InfoNodesFlatHandler(n),this.initialized=!0}}getNodeInfo(e){const t=this._infosMap.get(e);if(!t)throw new Ce("NodeInfo not found");return t}has(e){if(e instanceof re)return this.nodeInfosFlat.indexOf(e)>-1;try{return(!!this.getNodeInfo(e)).valueOf()}catch(t){if(t instanceof Ce)return!1;throw t}}afterOneCheckChanged(e){const{checked:t}=e;if(e._ignoreCheckedOnce)return delete e._ignoreCheckedOnce,!1;const n=l=>{const i=l.parent;if(i){let o=!1,r=!1;for(const u of i.children)if(u.checked||u.checked===0)o=!0;else if(r=!0,o&&r)break;const d=r?o?0:!1:!0;i.checked!==d&&(this._ignoreCheckedOnce(i),i.checked=d),n(i)}};return n(e),W(e.children,l=>{l.checked!==t&&(this._ignoreCheckedOnce(l),l.checked=t)},{childrenKey:X}),!0}_ignoreCheckedOnce(e){e._ignoreCheckedOnce=!0,setTimeout(()=>{e._ignoreCheckedOnce&&(e._ignoreCheckedOnce=!1)},100)}isVisible(e){const t=e instanceof re?e:this.getNodeInfo(e),n=l=>!l||!l.hidden&&l.open&&n(l.parent);return!!(!t.hidden&&n(t.parent))}updateCheck(){W(this.nodeInfos,e=>{if(e.children&&e.children.length>0){const t=e.children.every(n=>n.checked);e.checked!==t&&(this._ignoreCheckedOnce(e),e.checked=t)}},{childFirst:!0,childrenKey:X})}getChecked(e=!1){return this.nodeInfosFlat.filter(t=>t.checked||e&&t.checked===0)}getUnchecked(e=!0){return this.nodeInfosFlat.filter(t=>e?!t.checked:t.checked===!1)}openAll(){for(const e of this.nodeInfosFlat)e.open=!0}closeAll(){for(const e of this.nodeInfosFlat)e.open=!1}openNodeAndParents(e){const t=e instanceof re?e:this.getNodeInfo(e);for(const n of this.iterateParent(t,{withSelf:!0}))n.open=!0}_calcFlatIndex(e,t){let n=e?this.nodeInfosFlat.indexOf(e)+1:0;const l=e?e.children:this.nodeInfos;for(let i=0;i<t;i++)n+=this._count(l[i]);return n}add(e,t,n){if(this.has(e))throw"Can't add because data exists in tree";const l=t?t.children:this.nodeInfos;n==null&&(n=l.length);const i=this.options.infoHandler(new re({open:!!this.options.defaultOpen,nodeData:e,parent:t||null,children:[],level:t?t.level+1:1}));this._setPosition(i,t||null,n);const o=e[this.childrenKey];if(o){const r=o.slice();for(const d of r)this.add(d,i)}}remove(e){const t=this.getSiblings(e);if(t.includes(e)){je(t,e);const n=this._flat(e);this.nodeInfosFlat.splice(this.nodeInfosFlat.indexOf(e),n.length);for(const l of n)this._infosMap.delete(l.nodeData);return this.options.afterRemoveInfoNode(e),!0}return!1}getSiblings(e){const{parent:t}=e;return t?t.children:this.nodeInfos}_setPosition(e,t,n){(t?t.children:this.nodeInfos).splice(n,0,e),e.parent=t,e.level=t?t.level+1:1;const i=this._calcFlatIndex(t,n),o=this._flat(e);this.nodeInfosFlat.splice(i,0,...o);for(const r of o)this._infosMap.has(r.nodeData)||this._infosMap.set(r.nodeData,r);W(e,(r,d,u)=>{u&&(r.level=u.level+1)},{childrenKey:X}),this.options.afterSetInfoNode(e,t,n)}*iterateParent(e,t){let n=t!=null&&t.withSelf?e:e.parent;for(;n;)yield n,n=n.parent}move(e,t,n){if(this.has(e)){if(e.parent===t&&this.getSiblings(e).indexOf(e)===n)return!1;if(e===t)throw new Error("Can't move node to itself");if(t&&e.level<t.level){let l;for(const i of this.iterateParent(t))if(i.level===e.level){l=i;break}if(e===l)throw new Error("Can't move node to its descendant")}this.remove(e)}return this._setPosition(e,t,n),!0}_flat(e){const t=[];return W(e,n=>{t.push(n)},{childrenKey:X}),t}_count(e){return this._flat(e).length}getData(e,t){const{childrenKey:n}=this.options,l=new Se([]);return l.childrenKey=n,W(t||this.nodeInfos,(i,o,r,d)=>{let u={...i.nodeData,[n]:[]};e&&(u=e(u)),l.set(d,u)},{childrenKey:X}),l.data}}class Ce extends Error{constructor(e){super(e),this.name="StatNotFoundError"}}function Xe(s,e){const t=new We(e),n=new Ye(t);return t.noInitialization||n.init(),n}var Ge=te('<div class="drag-placeholder he-tree-drag-placeholder"><!></div>'),pe=te("-->",1);function tt(s,e){ze(e,!0),h(e,"updateBehavior",3,"modify");let t=h(e,"processor",15,()=>Xe([],{noInitialization:!0}));h(e,"childrenKey",3,X),h(e,"textKey",3,"text");let n=h(e,"indent",3,20),l=h(e,"virtualization",3,!1);h(e,"virtualizationPrerenderCount",3,20),h(e,"defaultOpen",3,!0);let i=h(e,"rtl",3,!1),o=h(e,"btt",3,!1);h(e,"nodeKey",3,"index");let r=h(e,"treeLine",3,!1),d=h(e,"treeLineOffset",3,8);h(e,"class",3,"");let u=h(e,"style",3,""),x=se(w([])),I=se(w([])),S=null,_=!1,D={};oe(()=>{e.model,console.log("model change detected"),console.log("Initializing model"),t().nodeData=e.model,t().init(),U(x,w(t().nodeInfos)),U(I,w(t().nodeInfosFlat))});function m(){let A=v(I)||[];return o()&&(A=A.slice().reverse()),A.filter(k=>j(k))}function j(A){return t().isVisible(A)}var F=Y(()=>ve("he-tree",i()&&"he-tree--rtl rtl",_)),N=Y(()=>!l()),Q=Y(m),Z=Y(()=>{var A;return((A=v(x))==null?void 0:A.length)||0});Re(s,{get class(){return v(F)},get style(){return u()},height:500,get isDisabled(){return v(N)},width:"auto",get model(){return v(Q)},get modelCount(){return v(Z)},itemSize:25,vl_slot:(k,E)=>{let b=()=>E==null?void 0:E().item;var L=B(),z=K(L);p(z,b,O=>{var H=Y(()=>ve(b().class,{"drag-placeholder-wrapper":b().nodeData===D,"dragging-node":b()===S}));Ue(O,{get class(){return v(H)},get style(){return b().style},get nodeInfo(){return b()},get rtl(){return i()},get btt(){return o()},get indent(){return n()},get treeLine(){return r()},get treeLineOffset(){return d()},get processor(){return t()},onNodeOpened:y=>e.onNodeOpened&&e.onNodeOpened(y),onNodeclosed:y=>e.onNodeClosed&&e.onNodeClosed(y),onNodeChecked:y=>e.onNodeChecked&&e.onNodeChecked(y),"<!--":!0,onclick:y=>e.onNodeClicked&&e.onNodeClicked(y),tn_slot:(y,J=Ee)=>{var ne=B(),ue=K(ne);p(ue,()=>J().data===D,a=>{var c=Ge(),g=he(c);p(g,()=>e.placeholder,V=>{var R=B(),$=K(R);ee($,()=>e.placeholder),C(V,R)}),fe(c),C(a,c)},a=>{var c=B(),g=K(c);ee(g,()=>e.tree_slot,J),C(a,c)}),C(y,ne)},children:(y,J)=>{Ne();var ne=pe();C(y,ne)},$$slots:{default:!0}})}),C(k,L)}}),ye()}export{tt as T};
