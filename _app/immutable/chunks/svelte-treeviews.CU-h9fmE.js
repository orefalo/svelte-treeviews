var Ze=Object.defineProperty;var Me=i=>{throw TypeError(i)};var Ge=(i,e,t)=>e in i?Ze(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var N=(i,e,t)=>Ge(i,typeof e!="symbol"?e+"":e,t),pe=(i,e,t)=>e.has(i)||Me("Cannot "+t);var K=(i,e,t)=>(pe(i,e,"read from private field"),t?t.call(i):e.get(i)),Y=(i,e,t)=>e.has(i)?Me("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t);import{d as $e,p as Te,a as m,s as H,o as et,b as tt,u as we,c as Re,i as Z,t as fe,e as Ve,f as C,g as ze,h as G,j as s,k as A,l as I,m as oe,n as j,q as M,r as Oe,v as T,w as ne,x as He,y as ie,z as je,A as le,B as de,C as re,D as nt,E as it,F as rt,G as We,H as st,I as lt,J as dt}from"./external.DBrx1XmV.js";$e(["click"]);function Ae(i){return Object.prototype.toString.call(i)==="[object Array]"}function ot(i){return i[i.length-1]}function qe(i,e){let t,n=0;for(;(t=i.indexOf(e))>-1;)i.splice(t,1),n++;return n}function at(i,e,t){i.hasOwnProperty(e)||(i[e]=t)}function ct(i,e){return Object.keys(e).forEach(t=>{at(i,t,e[t])}),i}function ht(i){const e={};return Object.keys(i).forEach(t=>{i[t]!==void 0&&(e[t]=i[t])}),e}function ee(i,e,t={}){t=ct({...t},{childrenKey:"children"});const n=t.childrenKey,r=Ae(i)?i:[i];class d{}const f=(o,c,h)=>{t.reverse&&(o=o.slice(),o.reverse());const g=o.length;for(let x=0;x<g;x++){const _=o[x],V=t.reverse?g-x-1:x,L=h?[...h,V]:[];t.childFirst&&_[n]!=null&&f(_[n],_,L);const S=e(_,V,c,L);if(S===!1)throw new d;if(S==="skip children")continue;if(S==="skip siblings")break;t.childFirst||_[n]!=null&&f(_[n],_,L)}};try{f(r,null,Ae(i)?[]:null)}catch(o){if(!(o instanceof d))throw o}}function ft(i,e){const t={childrenKey:"children"};e&&Object.assign(t,e);const n=t.childrenKey,r=t.nodeHandler,d=new Le;return d.childrenKey=n,ee(i,(f,o,c,h)=>{let g=Object.assign({},f);g[n]&&(g[n]=[]),r&&(g=r(g,{oldNode:f,index:o,parent:c,path:h})),d.set(h,g)},{childrenKey:n}),d.data}class Le{constructor(e=[]){N(this,"data");N(this,"childrenKey","children");this.data=e}get rootChildren(){const{childrenKey:e}=this,{data:t}=this;return Ae(t)?t:t[e]}*iteratePath(e,t={}){const{childrenKey:n,rootChildren:r}=this;if(t.reverse){const d=[...this.iteratePath(e,{...t,reverse:!1})];d.reverse();for(const{path:f,node:o}of d)yield{path:f,node:o}}else{let d=[],f=r;for(const o of e){const c=[...d,o],h=f[o];yield{path:c,node:h},d=c,f=h[n]}}}getFamily(e){const t=[];for(const{node:n}of this.iteratePath(e))t.push(n);return t}get(e){return ot(this.getFamily(e))}getParentAndIndex(e){const t=e.slice(),n=t.pop();return{parent:this.get(t),index:n,parentPath:t}}getParent(e){return this.getParentAndIndex(e).parent}set(e,t){if(e===null||e.length===0)this.data=t;else{const{childrenKey:n}=this;let{rootChildren:r}=this;const{parent:d,index:f}=this.getParentAndIndex(e);let o;e.length===1?(r||(this.data?this.data[n]=[]:this.data=[]),o=r):(d[n]||(d[n]=[]),o=d[n]),o[f]=t}}delete(e){const{childrenKey:t,rootChildren:n}=this,{parent:r,index:d}=this.getParentAndIndex(e),f=e.length===1?n:r[t],o=f[d];return f.splice(d,1),o}walk(e,t){const{childrenKey:n,data:r}=this;return ee(r,e,n)}clone(e={}){return ft(this.data),ht({childrenKey:this.childrenKey,nodeHandler:e.nodeHandler||void 0})}}function Be(i,e,t={}){t={start:0,end:i.length-1,maxTimes:1e3,...t};let n=t.start,r=t.end;const d=t.returnNearestIfNoHit,f=t.maxTimes;let o,c;n||(n=0,r=i.length-1);let h=0,g;for(;n>=0&&n<=r;){if(h>=f)throw Error(`binarySearch: loop times is over ${f}, you can increase the limit.`);o=Math.floor((r-n)/2+n),c=i[o];const x=h+1;if(g=e(c,o,x),g>0)r=o-1;else if(g<0)n=o+1;else return{index:o,value:c,count:x,hit:!0};h++}return d?{index:o,value:c,count:h+1,hit:!1,greater:g>0}:null}const ut=(()=>{let i=!1;try{const e=Object.defineProperty({},"passive",{get(){return i={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return i})();var gt=G('<div><!> <div class="vtlist-inner"><!></div> <!></div>');function vt(i,e){Te(e,!0);const t=m(e,"items",19,()=>[]),n=m(e,"isDisabled",3,!1),r=m(e,"isHorizontal",3,!1),d=m(e,"firstRender",3,6);m(e,"scrollToAlignment",19,()=>Qe.AUTO),m(e,"scrollToBehaviour",19,()=>Je.INSTANT);const f=m(e,"class",3,""),o=m(e,"style",3,"");let c=!1,h,g,x=H(0),_=H(0),V=100,L,S=H(0),p=H(d()-1),z=H(0);const w=T(()=>{var l;const a=(((l=t())==null?void 0:l.length)||1)-1;return s(p)<a?s(p):a}),b=T(()=>new Array(t().length)),E=T(()=>t().map((l,u)=>{if(s(b)[u]!=null)return s(b)[u];let k=e.itemSize&&e.itemSize(l,u);return k==null&&(k=s(z)),k})),y=T(()=>{const a=[];return s(E).reduce((l,u)=>(a.push(l),l+u),0),a}),R=T(()=>s(y)[s(S)]?s(y)[s(S)]:0),W=T(()=>s(y).length>0?s(y)[s(y).length-1]+s(E)[s(E).length-1]:0),B=T(()=>s(y)[s(w)]?s(W)-s(y)[s(w)]-s(E)[s(w)]:0);et(()=>{h.addEventListener("scroll",Ne,ut),c=!0,F()}),tt(()=>{c&&h.removeEventListener("scroll",Ne)});const se=T(()=>{if(!t()||n())return;const a=[];for(let l=s(S);l<=s(w);(l+=1)-1){const u=t()[l];if(!u)break;a.push({item:u,index:l})}return a}),ke=T(()=>de(!n()&&"overflow:auto;",o())),Pe=T(()=>de("display:flex;",!r()&&"flex-direction:column;"||"flex-direction:row;",!n()&&(!r()&&`margin-top:${s(R)}px;margin-bottom:${s(B)}px`||`margin-left:${s(R)}px;margin-right:${s(B)}px;width:${s(W)-s(B)-s(R)}px`)));we(()=>{F()});function Ne(){const a=ae(h);L!=null&&V-Math.abs(a-L)>=10||(L=a,F())}function Ke(){const a=ae(h)-Ce(h)-V;return Be(s(y),u=>u-a,{returnNearestIfNoHit:!0}).index}function v(){const a=ae(h)-Ce(h)+D(h)+V;return Be(s(y),u=>u-a,{returnNearestIfNoHit:!0}).index}function F(){s(z)||A(z,I(q())),A(S,I(Ke())),A(p,I(v()));let a=0;const l={},u=g.children;for(let k=0;k<u.length;(k+=1)-1){const P=u[k],Q=getComputedStyle(P),X=Q.position;if(X&&["absolute","fixed"].includes(X))continue;const ce=Q.display!=="none"?$(P):0,De=s(S)+a;l[De]=(l[De]||0)+ce,a+=1}for(const k of Object.keys(l)){const P=parseInt(k);s(b)[P]!==l[P]&&(s(b)[P]=l[P])}}function q(){const l=[],u=g.children;for(let k=0;k<u.length;(k+=1)-1){const P=u[k],Q=getComputedStyle(P);if(["absolute","fixed"].includes(Q.position))continue;const X=$(P);if(l.push(X),l.length>=10)break}return l.length===0?0:l.reduce((k,P)=>k+P,0)/l.length}function D(a){const l=getComputedStyle(a);let u=parseFloat(r()?l.width:l.height);return l.boxSizing==="border-box"&&(r()?u-=parseFloat(l.borderLeftWidth)-parseFloat(l.borderRightWidth):u-=parseFloat(l.borderTopWidth)-parseFloat(l.borderBottomWidth)),u}function $(a){const l=getComputedStyle(a);let u=D(a);return r()?u+=parseFloat(l.borderLeftWidth)+parseFloat(l.borderRightWidth)+parseFloat(l.marginLeft)+parseFloat(l.marginRight):u+=parseFloat(l.borderTopWidth)+parseFloat(l.borderBottomWidth)+parseFloat(l.marginTop)+parseFloat(l.marginBottom),Number.isNaN(u)?0:u}function ae(a){return r()?a.scrollLeft:a.scrollTop}function Ce(a){const l=getComputedStyle(a);return r()?parseFloat(l.paddingLeft):parseFloat(l.paddingTop)}var J=gt();Re(J,a=>h=a,()=>h);const Ee=T(()=>de("vtlist",f()));var U=ne(J);Z(U,()=>e.header,a=>{var l=j(),u=M(l);re(u,()=>e.header),C(a,l)});var O=oe(U,2);Re(O,a=>g=a,()=>g);var Se=ne(O);Z(Se,n,a=>{var l=j(),u=M(l);Oe(u,17,t,He,(k,P,Q)=>{var X=j(),ce=M(X);re(ce,()=>e.vl_slot,()=>({item:s(P).item,index:Q})),C(k,X)}),C(a,l)},a=>{var l=j(),u=M(l);Oe(u,17,()=>s(se),He,(k,P,Q)=>{var X=j(),ce=M(X);re(ce,()=>e.vl_slot,()=>({item:s(P).item,index:Q})),C(k,X)}),C(a,l)}),ie(O);var Fe=oe(O,2);Z(Fe,()=>e.footer,a=>{var l=j(),u=M(l);re(u,()=>e.footer),C(a,l)}),ie(J),fe(()=>{je(J,s(Ee)),le(J,"style",s(ke)),le(O,"style",s(Pe))}),Ve(J,"clientHeight",a=>A(x,a)),Ve(J,"clientWidth",a=>A(_,a)),C(i,J),ze()}var Je=(i=>(i.AUTO="auto",i.SMOOTH="smooth",i.INSTANT="instant",i))(Je||{}),Qe=(i=>(i.AUTO="auto",i.START="start",i.CENTER="center",i.END="end",i))(Qe||{}),mt=G('<div class="tree-line tree-vline svelte-gfld7i"></div>'),_t=G('<div class="tree-line tree-hline svelte-gfld7i"></div>'),yt=G("<!> <!>",1),xt=G('<div><!> <div class="tree-node-inner"><!></div></div>');function bt(i,e){Te(e,!0);let t=m(e,"rtl",3,!1),n=m(e,"btt",3,!1),r=m(e,"indent",3,20),d=m(e,"treeLine",3,!0),f=m(e,"treeLineOffset",3,10),o=T(()=>`${t()?"paddingRight":"paddingLeft"}:${r()*(e.nodeInfo.level-1)}px`),c=T(()=>`${t()?"right":"left"}:${(e.nodeInfo.level-2)*r()+f()}px`);we(()=>{var z,w;e.nodeInfo.checked,!h&&(z=e.processor)!=null&&z.afterOneCheckChanged(e.nodeInfo)&&((w=e.onNodeChecked)==null||w.call(e,e.nodeInfo))}),we(()=>{var w,b;const z=e.nodeInfo.expended;console.log("toggleOpen"),!h&&(z?(w=e.onNodeOpened)==null||w.call(e,e.nodeInfo):(b=e.onNodeClosed)==null||b.call(e,e.nodeInfo),g())});let h=!1;const g=()=>{h=!0,setTimeout(()=>{h=!1},100)},x=T(()=>{const z=[],w=R=>{var W;if(R.parent){let B=(W=R.parent)==null?void 0:W.children.indexOf(R);do{B+=1;const se=R.parent.children[B];if(se){if(!se.hidden)return!0}else break}while(!0)}return!1},b=t()?"right":"left",E=n()?"top":"bottom";let y=e.nodeInfo;for(;y;){const R=(y.level-2)*r()+f(),W=w(y),B=()=>{z.push({style:`${b}:${R}px;${E}:${W?"0":"50%"}`})};y===e.nodeInfo?y.level>1&&B():W&&B(),y=y.parent}return z});var _=xt();const V=T(()=>`${de("tree-node",e.class,d()&&"tree-node--with-tree-line")??""} svelte-gfld7i`);var L=ne(_);Z(L,d,z=>{var w=yt(),b=M(w);Oe(b,17,()=>s(x),He,(y,R)=>{var W=mt();fe(()=>le(W,"style",s(R).style)),C(y,W)});var E=oe(b,2);Z(E,()=>e.nodeInfo.level>1,y=>{var R=_t();fe(()=>le(R,"style",s(c))),C(y,R)}),C(z,w)});var S=oe(L,2),p=ne(S);re(p,()=>e.tn_slot,()=>({data:e.nodeInfo.data,info:e.nodeInfo})),ie(S),ie(_),fe(()=>{je(_,s(V)),le(_,"style",`${e.style} ${s(o)}`)}),C(i,_),ze()}var ue,ge,ve,me,_e,ye;class he{constructor(e){N(this,"data");Y(this,ue,H(!1));N(this,"parent");Y(this,ge,H(I([])));N(this,"level",0);Y(this,ve,H(!1));Y(this,me,H(!1));N(this,"draggable");N(this,"droppable");Y(this,_e,H(""));Y(this,ye,H(""));N(this,"_ignoreCheckedOnce");this.data=(e==null?void 0:e.data)||null,this.expended=(e==null?void 0:e.expended)||!1,this.parent=e==null?void 0:e.parent,this.children=(e==null?void 0:e.children)||[],this.level=(e==null?void 0:e.level)||0,this.hidden=(e==null?void 0:e.hidden)||!1,this.checked=(e==null?void 0:e.checked)||!1,this.draggable=e==null?void 0:e.draggable,this.droppable=e==null?void 0:e.droppable,this.style=e==null?void 0:e.style,this.class=e==null?void 0:e.class,this._ignoreCheckedOnce=e==null?void 0:e._ignoreCheckedOnce}get expended(){return s(K(this,ue))}set expended(e){A(K(this,ue),I(e))}get children(){return s(K(this,ge))}set children(e){A(K(this,ge),I(e))}get hidden(){return s(K(this,ve))}set hidden(e){A(K(this,ve),I(e))}get checked(){return s(K(this,me))}set checked(e){A(K(this,me),I(e))}get style(){return s(K(this,_e))}set style(e){A(K(this,_e),I(e))}get class(){return s(K(this,ye))}set class(e){A(K(this,ye),I(e))}toggleExpand(){console.log("nodeInfo.toggleExpand"),this.expended=!this.expended,console.log(this.expended)}toggleChecked(){console.log("nodeInfo.toggleChecked"),this.checked=!this.checked,console.log(this.checked)}}ue=new WeakMap,ge=new WeakMap,ve=new WeakMap,me=new WeakMap,_e=new WeakMap,ye=new WeakMap;const te="children";class Xe{constructor(e){N(this,"childrenKey",te);N(this,"defaultOpen",!1);N(this,"noInitialization",!1);this.childrenKey=(e==null?void 0:e.childrenKey)||te,this.defaultOpen=(e==null?void 0:e.defaultOpen)||!1,this.noInitialization=(e==null?void 0:e.noInitialization)||!1}}var xe,be,Ie;class It{constructor(e,t){N(this,"rawData");Y(this,xe,H(I([])));Y(this,be,H(I([])));Y(this,Ie,H(I(new Map)));N(this,"options");N(this,"afterSetInfoNode");N(this,"afterRemoveInfoNode");N(this,"infoNodesHandler");N(this,"infoNodesFlatHandler");N(this,"infoHandler",e=>e);N(this,"initialized",!1);this.options=t||new Xe}get nodeInfos(){return s(K(this,xe))}set nodeInfos(e){A(K(this,xe),I(e))}get nodeInfosToRender(){return s(K(this,be))}set nodeInfosToRender(e){A(K(this,be),I(e))}get _infosMap(){return s(K(this,Ie))}set _infosMap(e){A(K(this,Ie),I(e))}init(){if(!this.initialized){this.initialized=!0,console.log("TreeProcessor.init() called");const e=this.options.childrenKey,t=new Le([]);this._infosMap.clear(),ee(this.rawData,(r,d,f,o)=>{const c=this.infoHandler(new he({data:r,expended:this.options.defaultOpen,parent:t.getParent(o),children:[],level:o.length}));this._infosMap.set(r,c),t.set(o,c)},{childrenKey:e}),console.log("td",t);const n=[];t.walk(r=>{n.push(r)}),console.log("flat",n),this.nodeInfos=this.infoNodesHandler?this.infoNodesHandler(t.rootChildren):t.rootChildren,this.nodeInfosToRender=this.infoNodesFlatHandler?this.infoNodesFlatHandler(n):n}}getNodeInfo(e){const t=this._infosMap.get(e);if(!t)throw new Ue("NodeInfo not found");return t}has(e){if(e instanceof he)return this.nodeInfosToRender.indexOf(e)>-1;try{return(!!this.getNodeInfo(e)).valueOf()}catch(t){if(t instanceof Ue)return!1;throw t}}_getPathByStat(e){if(e===null)return[];const n=this.getSiblings(e).indexOf(e);return[...e.parent?this._getPathByStat(e.parent):[],n]}afterOneCheckChanged(e){const{checked:t}=e;if(e._ignoreCheckedOnce)return delete e._ignoreCheckedOnce,!1;const n=r=>{const d=r.parent;if(d){let f=!1,o=!1,c=!1;for(const g of d.children)g.checked?f=!0:g.checked===0?c=!0:o=!0;const h=c?0:o?f?0:!1:!0;d.checked!==h&&(this._ignoreCheckedOnce(d),d.checked=h),n(d)}};return n(e),ee(e.children,r=>{r.checked!==t&&(this._ignoreCheckedOnce(r),r.checked=t)},{childrenKey:te}),!0}_ignoreCheckedOnce(e){e._ignoreCheckedOnce=!0,setTimeout(()=>{e._ignoreCheckedOnce&&(e._ignoreCheckedOnce=!1)},100)}isVisible(e){const t=e instanceof he?e:this.getNodeInfo(e),n=r=>!r||!r.hidden&&r.expended&&n(r.parent);return!t.hidden&&n(t.parent)}updateCheckboxes(){ee(this.nodeInfos,e=>{if(e.children&&e.children.length>0){const t=e.children.every(n=>n.checked);e.checked!==t&&(this._ignoreCheckedOnce(e),e.checked=t)}},{childFirst:!0,childrenKey:te})}getChecked(e=!1){return this.nodeInfosToRender.filter(t=>t.checked||e&&t.checked===0)}getUnchecked(e=!0){return this.nodeInfosToRender.filter(t=>e?!t.checked:t.checked===!1)}openAll(){for(const e of this.nodeInfosToRender)e.expended=!0}closeAll(){for(const e of this.nodeInfosToRender)e.expended=!1}openNodeAndParents(e){const t=e instanceof he?e:this.getNodeInfo(e);for(const n of this.iterateParent(t,{withSelf:!0}))n.expended=!0}_calcFlatIndex(e,t){let n=e?this.nodeInfosToRender.indexOf(e)+1:0;const r=e?e.children:this.nodeInfos;for(let d=0;d<t;(d+=1)-1)n+=this._count(r[d]);return n}add(e,t,n){if(this.has(e))throw"Can't add because data exists in tree";const r=t?t.children:this.nodeInfos;n==null&&(n=r.length);const d=this.infoHandler(new he({expended:!!this.options.defaultOpen,data:e,parent:t||null,children:[],level:t?t.level+1:1}));this._setPosition(d,t||null,n);const f=e[this.childrenKey];if(f){const o=f.slice();for(const c of o)this.add(c,d)}}remove(e){var n;const t=this.getSiblings(e);if(t.includes(e)){qe(t,e);const r=this._flat(e);this.nodeInfosToRender.splice(this.nodeInfosToRender.indexOf(e),r.length);for(const d of r)this._infosMap.delete(d.data);return(n=this.afterRemoveInfoNode)==null||n.call(this,e),!0}return!1}getSiblings(e){const{parent:t}=e;return t?t.children:this.nodeInfos}_setPosition(e,t,n){var o;(t?t.children:this.nodeInfos).splice(n,0,e),e.parent=t,e.level=t?t.level+1:1;const d=this._calcFlatIndex(t,n),f=this._flat(e);this.nodeInfosToRender.splice(d,0,...f);for(const c of f)this._infosMap.has(c.data)||this._infosMap.set(c.data,c);ee(e,(c,h,g)=>{g&&(c.level=g.level+1)},{childrenKey:te}),(o=this.afterSetInfoNode)==null||o.call(this,e,t,n)}*iterateParent(e,t){let n=t!=null&&t.withSelf?e:e.parent;for(;n;)yield n,n=n.parent}move(e,t,n){if(this.has(e)){if(e.parent===t&&this.getSiblings(e).indexOf(e)===n)return!1;if(e===t)throw new Error("Can't move node to itself");if(t&&e.level<t.level){let r;for(const d of this.iterateParent(t))if(d.level===e.level){r=d;break}if(e===r)throw new Error("Can't move node to its descendant")}this.remove(e)}return this._setPosition(e,t,n),!0}_flat(e){const t=[];return ee(e,n=>{t.push(n)},{childrenKey:te}),t}_count(e){return this._flat(e).length}getData(e,t){const{childrenKey:n}=this.options,r=new Le([]);return r.childrenKey=n,ee(t||this.nodeInfos,(d,f,o,c)=>{let h={...d.data,[n]:[]};e&&(h=e(h)),r.set(c,h)},{childrenKey:te}),r.data}}xe=new WeakMap,be=new WeakMap,Ie=new WeakMap;class Ue extends Error{constructor(e){super(e),this.name="StatNotFoundError"}}class kt extends Xe{constructor(t){super(t);N(this,"preProcessor")}filter(t,n){return t?t(n):n}}function Nt(i,e){const t=new kt(e),n=new It(i,t);return t.noInitialization||n.init(),n}var Ct=G('<div class="drag-placeholder he-tree-drag-placeholder"><!></div>');function Kt(i,e){Te(e,!0);let t=m(e,"processor",23,()=>Nt([],{noInitialization:!0})),n=m(e,"updateBehavior",3,"modify"),r=m(e,"childrenKey",3,te);m(e,"textKey",3,"text"),m(e,"nodeKey",3,"index");let d=m(e,"indent",3,20),f=m(e,"virtualization",3,!1);m(e,"virtualizationPrerenderCount",3,20),m(e,"defaultOpen",3,!0);let o=m(e,"rtl",3,!1),c=m(e,"btt",3,!1),h=m(e,"treeLine",3,!1),g=m(e,"treeLineOffset",3,8);m(e,"class",3,"");let x=m(e,"style",3,"");const _=v=>v?(v[r()]||(v[r()]=[]),v[r()]):s(y);t().afterSetInfoNode=(v,F,q)=>{let D=s(y);if(n()==="new"){if(b)return;D=ke()}else if(n()==="modify"){const $=_(F==null?void 0:F.data);$.includes(v.data)||$.splice(q,0,v.data)}else n();b||B(D)},t().afterRemoveInfoNode=v=>{var q;let F=s(y);if(n()==="new"){if(b)return;F=ke()}else if(n()==="modify"){const D=_((q=v.parent)==null?void 0:q.data);qe(D,v.data)}else n();b||B(F)};let V,L=H(I([])),S=H(I([])),p=null,z=!1,w={},b=!1,E=!1,y=T(()=>e.model);we(()=>{console.log("model change detected"),E?E=!1:(console.log("Initializing model"),t().rawData=e.model,t().init(),A(L,I(t().nodeInfos)),A(S,I(t().nodeInfosToRender)))});function R(){console.log("filterVisibleNodes");let v=s(S)||[];return c()&&(v=v.slice(),v.reverse()),v=v.filter(F=>se(F)),console.log("# items to render:"+v.length),v}function W(v){e.onUpdateValue&&e.onUpdateValue(v)}function B(v){return n()==="disabled"?!1:(v!==s(y)&&(E=!0),W(v),!0)}function se(v){return t().isVisible(v)}function ke(v,F){return t().getData(v,F)}var Pe=T(()=>de("he-tree",o()&&"he-tree--rtl rtl",z)),Ne=T(()=>!f()),Ke=T(R);Re(vt(i,{get class(){return s(Pe)},get style(){return x()},get isDisabled(){return s(Ne)},get model(){return s(Ke)},itemSize:()=>25,vl_slot:(F,q)=>{let D=()=>q==null?void 0:q().item;var $=j(),ae=M($);Z(ae,D,Ce=>{var J=T(()=>de(D().class,{"drag-placeholder-wrapper":D().data===w,"dragging-node":D()===p}));bt(Ce,{get class(){return s(J)},get style(){return D().style},get nodeInfo(){return D()},get rtl(){return o()},get btt(){return c()},get indent(){return d()},get treeLine(){return h()},get treeLineOffset(){return g()},get processor(){return t()},onNodeOpened:U=>{var O;return(O=e.onNodeOpened)==null?void 0:O.call(e,U)},onNodeClosed:U=>{var O;return(O=e.onNodeClosed)==null?void 0:O.call(e,U)},onNodeSelected:U=>{var O;return(O=e.onNodeSelected)==null?void 0:O.call(e,U)},onNodeChecked:U=>{var O;return(O=e.onNodeChecked)==null?void 0:O.call(e,U)},tn_slot:(U,O=nt)=>{var Se=j(),Fe=M(Se);Z(Fe,()=>O().data===w,a=>{var l=Ct(),u=ne(l);Z(u,()=>e.placeholder,k=>{var P=j(),Q=M(P);re(Q,()=>e.placeholder),C(k,P)}),ie(l),C(a,l)},a=>{var l=j(),u=M(l);re(u,()=>e.tree_slot,O),C(a,l)}),C(U,Se)},$$slots:{tn_slot:!0}})}),C(F,$)},$$slots:{vl_slot:!0}}),F=>V=F,()=>V),ze()}var St=G('<div class="item svelte-1s0qzrn"><!></div>'),wt=G('<section class="svelte-1s0qzrn"><!></section>'),Ot=G("<b> </b> <!>",1);function Ye(i,e){Te(e,!0);let t=m(e,"tree",15),n=m(e,"node",7);const r=300;function d(x){n().children=x.detail.items}function f(x){n().children=x.detail.items,t({...t()})}var o=Ot(),c=M(o),h=ne(c);ie(c);var g=oe(c,2);Z(g,()=>{var x;return(x=n())==null?void 0:x.children},x=>{var _=wt(),V=ne(_);Z(V,()=>n().children,L=>{var S=j(),p=M(S);Oe(p,25,()=>n().children,z=>z.id,(z,w)=>{var b=St(),E=ne(b);Ye(E,{get tree(){return t()},set tree(y){t(y)},get node(){return t()[s(w).id]}}),ie(b),rt(b,()=>lt,()=>({duration:r})),C(z,b)}),C(L,S)}),ie(_),We("consider",_,d),We("finalize",_,f),st(_,(L,S)=>dt(L,S),()=>({items:n().children||[],flipDurationMs:r,centreDraggedOnCursor:!0})),C(x,_)}),fe(()=>{var x,_;le(c,"style",`color:${((x=n())==null?void 0:x.color)??""}`),it(h,(_=n())==null?void 0:_.name)}),C(i,o),ze()}var Tt=G("<h3>Try dragging node2 into node3 and then node4 into node2</h3> <!>",1);function Ft(i){let e=H(I({node1:{name:"node 1",children:[{id:"node2"},{id:"node3"},{id:"node4"}],id:"node1"},node2:{name:"node 2",children:[{id:"node5"},{id:"node6"},{id:"node7"},{id:"node8"}],id:"node2"},node3:{name:"node 3",children:[{id:"node9"},{id:"node10"},{id:"node11"},{id:"node12"}],id:"node3"},node4:{name:"node 4",children:[{id:"node13"},{id:"node14"},{id:"node15"},{id:"node16"}],id:"node4",color:"salmon"}}));for(let r=5;r<17;(r+=1)-1)s(e)[`node${r}`]={id:`node${r}`,name:`item ${r}`};s(e).node10.color="steelblue",s(e).node11.color="steelblue",s(e).node14.color="orange",s(e).node15.color="orange",s(e).node6.color="forestgreen";var t=Tt(),n=oe(M(t),2);Ye(n,{get node(){return s(e).node1},get tree(){return s(e)},set tree(r){A(e,I(r))}}),C(i,t)}export{Ft as A,he as N,Kt as T,vt as V};
