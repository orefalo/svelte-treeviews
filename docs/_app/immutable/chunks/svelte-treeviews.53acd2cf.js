import{S as Fe,i as Ye,s as ze,c as ve,a as x,e as R,b as $,d as S,f as K,g as p,h as Oe,j as C,k as O,l as G,u as Ee,m as Ie,n as Ve,t as H,o as kl,p as cn,q as z,r as Sn,v as pl,w as gn,x as ee,y as pe,z as Ge,A as Je,B as ml,C as Qe,D as Xe,E as Ze,F as Cl,G as Dl,H as xe,I as Pn,J as bn,K as j,L as wl,M as v,N as Tl,O as vl,P as El,Q as se,R as oe,T as ae,U as Te,V as Il}from"./external.71726656.js";function Vl(l){let e,n,i,s,r,o;const a=l[5].default,u=ve(a,l,l[4],null);return{c(){e=x(),n=R("div"),u&&u.c(),this.h()},l(P){e=$(P),n=S(P,"DIV",{style:!0,class:!0});var k=K(n);u&&u.l(k),k.forEach(p),this.h()},h(){Oe(n,"top",l[1]+"px"),Oe(n,"left",l[0]+"px"),C(n,"class","svelte-qdnnva")},m(P,k){O(P,e,k),O(P,n,k),u&&u.m(n,null),l[6](n),s=!0,r||(o=G(document.body,"click",l[3]),r=!0)},p(P,[k]){u&&u.p&&(!s||k&16)&&Ee(u,a,P,P[4],s?Ve(a,P[4],k,null):Ie(P[4]),null),(!s||k&2)&&Oe(n,"top",P[1]+"px"),(!s||k&1)&&Oe(n,"left",P[0]+"px")},i(P){s||(H(u,P),kl(()=>{s&&(i||(i=cn(n,gn,{duration:100},!0)),i.run(1))}),s=!0)},o(P){z(u,P),i||(i=cn(n,gn,{duration:100},!1)),i.run(0),s=!1},d(P){P&&p(e),P&&p(n),u&&u.d(P),l[6](null),P&&i&&i.end(),r=!1,o()}}}const Ll={};function Al(l,e,n){let{$$slots:i={},$$scope:s}=e,{x:r}=e,{y:o}=e;const a=Sn();pl(Ll,{dispatchClick:()=>a("click")});let u;function P(d){d.target===u||u.contains(d.target)||a("clickoutside")}function k(d){ee[d?"unshift":"push"](()=>{u=d,n(2,u)})}return l.$$set=d=>{"x"in d&&n(0,r=d.x),"y"in d&&n(1,o=d.y),"$$scope"in d&&n(4,s=d.$$scope)},l.$$.update=()=>{l.$$.dirty&7&&((d,g)=>{if(!u)return;const D=u.getBoundingClientRect();d=Math.min(window.innerWidth-D.width,d),g>window.innerHeight-D.height&&(g-=D.height)})(r,o)},[r,o,u,P,s,i,k]}class Ml extends Fe{constructor(e){super(),Ye(this,e,Al,Vl,ze,{x:0,y:1})}}const Nl=l=>({node:l&4}),yn=l=>({node:l[2]});function kn(l){let e,n;const i=[l[0]];let s={$$slots:{default:[Sl]},$$scope:{ctx:l}};for(let r=0;r<i.length;r+=1)s=ml(s,i[r]);return e=new Ml({props:s}),e.$on("click",l[3]),e.$on("clickoutside",l[3]),{c(){Qe(e.$$.fragment)},l(r){Xe(e.$$.fragment,r)},m(r,o){Ze(e,r,o),n=!0},p(r,o){const a=o&1?Cl(i,[Dl(r[0])]):{};o&68&&(a.$$scope={dirty:o,ctx:r}),e.$set(a)},i(r){n||(H(e.$$.fragment,r),n=!0)},o(r){z(e.$$.fragment,r),n=!1},d(r){xe(e,r)}}}function Rl(l){var r;let e,n,i=((r=l[2])==null?void 0:r.nodePath)+"",s;return{c(){e=R("b"),n=Pn("context menu openned from: "),s=Pn(i)},l(o){e=S(o,"B",{});var a=K(e);n=bn(a,"context menu openned from: "),s=bn(a,i),a.forEach(p)},m(o,a){O(o,e,a),j(e,n),j(e,s)},p(o,a){var u;a&4&&i!==(i=((u=o[2])==null?void 0:u.nodePath)+"")&&wl(s,i)},d(o){o&&p(e)}}}function Sl(l){let e;const n=l[5].default,i=ve(n,l,l[6],yn),s=i||Rl(l);return{c(){s&&s.c()},l(r){s&&s.l(r)},m(r,o){s&&s.m(r,o),e=!0},p(r,o){i?i.p&&(!e||o&68)&&Ee(i,n,r,r[6],e?Ve(n,r[6],o,Nl):Ie(r[6]),yn):s&&s.p&&(!e||o&4)&&s.p(r,e?o:-1)},i(r){e||(H(s,r),e=!0)},o(r){z(s,r),e=!1},d(r){s&&s.d(r)}}}function Ol(l){let e,n,i,s,r=l[1]&&kn(l);return{c(){r&&r.c(),e=pe()},l(o){r&&r.l(o),e=pe()},m(o,a){r&&r.m(o,a),O(o,e,a),n=!0,i||(s=G(window,"click",l[3]),i=!0)},p(o,[a]){o[1]?r?(r.p(o,a),a&2&&H(r,1)):(r=kn(o),r.c(),H(r,1),r.m(e.parentNode,e)):r&&(Ge(),z(r,1,1,()=>{r=null}),Je())},i(o){n||(H(r),n=!0)},o(o){z(r),n=!1},d(o){r&&r.d(o),o&&p(e),i=!1,s()}}}function Wl(l,e,n){let{$$slots:i={},$$scope:s}=e,r={x:0,y:0},o=!1,a=null;async function u(k,d){o&&(n(1,o=!1),await new Promise(g=>setTimeout(g,100))),n(2,a=d),n(0,r={x:k.clientX,y:k.clientY}),n(1,o=!0)}function P(){n(1,o=!1),n(2,a=null)}return l.$$set=k=>{"$$scope"in k&&n(6,s=k.$$scope)},[r,o,a,P,u,i,s]}class ql extends Fe{constructor(e){super(),Ye(this,e,Wl,Ol,ze,{onRightClick:4})}get onRightClick(){return this.$$.ctx[4]}}function Z(l){return l==null?void 0:l.substring(0,l.lastIndexOf("."))}function Bl(l){return!l||!!(l.match(/\./g)||[]).length}function We(l,e,n,i){return(l||[]).filter(s=>e?i(s)===e:!n(s))}function On(l,e,n,i){return l.filter(r=>e?r[i.nodePathProperty].startsWith(e.toString())&&r[i.nodePathProperty]!=e:!n(r))}function Ul(l,e,n,i){return l.map(s=>{const r=s;return s[i.nodePathProperty]==(e==null?void 0:e[i.nodePathProperty])&&(r[i.expandedProperty]=n),r})}function Wn(l,e){return l.sort((n,i)=>i[e.priorityProperty]>n[e.priorityProperty]?-1:1),l}function jl(l,e,n){return l.map(i=>(i[n.hasChildrenProperty]==!0&&(i[n.expandedProperty]=e),i))}function Hl(l,e,n,i,s,r,o){return l?(e=pn(e,n,o),en(e,n,i,s,r,o)):pn(e,n,o)}function pn(l,e,n){return l.map(i=>{const s=i;return i[n.nodePathProperty]==e&&(s[n.selectedProperty]=!i[n.selectedProperty]),s})}function Kl(l,e,n,i,s,r,o){return l=l.map(a=>(e==a[o.nodePathProperty]&&(a=He(a,i,o)),e?a[o.nodePathProperty].startsWith(e.toString())&&a[o.nodePathProperty]!=e.toString()&&(a=He(a,i,o)):n(a)||(a=He(a,i,o)),a)),l=en(l,e,n,s,r,o),l}function He(l,e,n){return l[n.hasChildrenProperty]?l.__visual_state=e.toString():l[n.selectedProperty]=e,l}function $e(l,e,n,i,s){const r=We(l,e[s.nodePathProperty],n,i);return!r||(r==null?void 0:r.length)==0?"false":r.every(o=>o[s.selectedProperty]===!0||o.__visual_state==="true")?"true":r.some(o=>o[s.selectedProperty]===!0||o.__visual_state==="indeterminate"||o.__visual_state==="true")?"indeterminate":"false"}function en(l,e,n,i,s,r){const o=i({[r.nodePathProperty]:e});let a;return s.forEach(u=>{u[r.nodePathProperty]==o&&(a=$e(s,u,n,i,r),u.__visual_state=a)}),Z(o)!=""&&(l=en(l,o,n,i,s,r)),l}function mn(l,e,n,i,s){return We(l,null,e,n).forEach(o=>{o[s.hasChildrenProperty]==!0&&(l=qn(l,o,e,n,i,s),o.__visual_state=$e(i,o,e,n,s))}),l}function qn(l,e,n,i,s,r){return We(l,e[r.nodePathProperty],n,i).forEach(a=>{a[r.hasChildrenProperty]==!0&&(l=qn(l,a,n,i,s,r),a.__visual_state=$e(s,a,n,i,r))}),l}function Fl(l,e,n,i,s,r,o){const a=s==0,u=a?n:Z(n);if(u.startsWith(e))return;const P=!a&&Z(e)==Z(n);let k=e;if(!P){let m;r?m=zl(l,u,i,o):m=e.substring(Z(e)?Z(e).length+1:0),k=(u?u+".":"")+m}const d=l.find(m=>m[o.nodePathProperty]==n);let g;l=l.map(m=>{if(m[o.nodePathProperty]==u&&(m[o.hasChildrenProperty]=!0,m[o.expandedProperty]=!0),!P&&m[o.nodePathProperty].startsWith(e)){const T=m[o.nodePathProperty].replace(e,k);m[o.nodePathProperty]=T}if(m[o.nodePathProperty]==k)if(g=m,a||d[o.priorityProperty]!=null){let T=0;a||(T=d[o.priorityProperty]??0,s==-1&&(T+=1)),Yl(l,u,k,T,i,o),m[o.priorityProperty]=T}else g[o.priorityProperty]=void 0;return m});const D=l.findIndex(m=>m[o.nodePathProperty]==k);l.splice(D,1);const J=l.findIndex(m=>m[o.nodePathProperty]==d[o.nodePathProperty]);return l.splice(J+(s==1?0:1),0,g),l}function Yl(l,e,n,i,s,r){let o=i+1;Wn(On(l,e,s,r),r).forEach(a=>{a[r.priorityProperty]>=i&&a[r.nodePathProperty]!=n&&(a[r.priorityProperty]=o++)})}function zl(l,e,n,i){let s="0";return On(l,e,n,i).forEach(r=>{const o=Z(r[i.nodePathProperty]);if(o==e){const a=r[i.nodePathProperty].substring(o?o.length+1:0);parseInt(a)>=parseInt(s)&&(s=a)}}),parseInt(s)+1}function Ke(l,e){const n=e.getBoundingClientRect(),i=n.bottom-n.height/2;return l.y<i?1:-1}function Cn(l){switch(l){case 1:return"before";case 0:return"inside";case-1:return"after"}}const Gl=l=>({node:l[3]&2048}),Dn=l=>({node:l[104]});function wn(l,e,n){const i=l.slice();return i[104]=e[n],i[105]=e,i[106]=n,i}const Jl=l=>({node:l[3]&16384}),Tn=l=>({node:l[107]}),Ql=l=>({node:l[1]&16384}),vn=l=>({node:l[104]});function En(l){let e,n,i;return{c(){e=R("div"),n=R("div"),this.h()},l(s){e=S(s,"DIV",{class:!0});var r=K(e);n=S(r,"DIV",{class:!0}),K(n).forEach(p),r.forEach(p),this.h()},h(){C(n,"class",i="insert-line "+l[23]),C(e,"class","insert-line-wrapper")},m(s,r){O(s,e,r),j(e,n)},p(s,r){r[0]&8388608&&i!==(i="insert-line "+s[23])&&C(n,"class",i)},d(s){s&&p(e)}}}function Xl(l){let e;return{c(){e=R("span")},l(n){e=S(n,"SPAN",{}),K(e).forEach(p)},m(n,i){O(n,e,i)},p:Il,d(n){n&&p(e)}}}function Zl(l){let e,n,i,s,r;function o(){return l[69](l[104])}return{c(){e=R("span"),n=R("i"),this.h()},l(a){e=S(a,"SPAN",{});var u=K(e);n=S(u,"I",{class:!0}),K(n).forEach(p),u.forEach(p),this.h()},h(){C(n,"class",i="far "+(X(l[104][l[39].expandedProperty],l[38],l[16])?l[20]:l[21])),v(n,"fa-minus-square",X(l[104][l[39].expandedProperty],l[38],l[16])),v(n,"fa-plus-square",!X(l[104][l[39].expandedProperty],l[38],l[16])||l[104][l[39].useCallbackProperty])},m(a,u){O(a,e,u),j(e,n),s||(r=G(e,"click",o),s=!0)},p(a,u){l=a,u[0]&3211264|u[1]&16768&&i!==(i="far "+(X(l[104][l[39].expandedProperty],l[38],l[16])?l[20]:l[21]))&&C(n,"class",i),u[0]&3211264|u[1]&16768&&v(n,"fa-minus-square",X(l[104][l[39].expandedProperty],l[38],l[16])),u[0]&3211264|u[1]&16768&&v(n,"fa-plus-square",!X(l[104][l[39].expandedProperty],l[38],l[16])||l[104][l[39].useCallbackProperty])},d(a){a&&p(e),s=!1,r()}}}function In(l){let e,n;function i(o,a){return a[0]&1024|a[1]&16384&&(e=null),e==null&&(e=!!o[51](o[104],o[10])),e?$l:xl}let s=i(l,[-1,-1,-1,-1]),r=s(l);return{c(){r.c(),n=pe()},l(o){r.l(o),n=pe()},m(o,a){r.m(o,a),O(o,n,a)},p(o,a){s===(s=i(o,a))&&r?r.p(o,a):(r.d(1),r=s(o),r&&(r.c(),r.m(n.parentNode,n)))},d(o){r.d(o),o&&p(n)}}}function xl(l){let e,n;return{c(){e=R("input"),this.h()},l(i){e=S(i,"INPUT",{type:!0,id:!0,onclick:!0}),this.h()},h(){C(e,"type","checkbox"),C(e,"id",n=l[47](l[104])),C(e,"onclick","return false;"),e.disabled=!0,v(e,"invisible",!l[12])},m(i,s){O(i,e,s)},p(i,s){s[1]&16384&&n!==(n=i[47](i[104]))&&C(e,"id",n),s[0]&4096&&v(e,"invisible",!i[12])},d(i){i&&p(e)}}}function $l(l){let e;function n(r,o){return!r[9]||r[9]&&!r[104][r[39].hasChildrenProperty]?lt:r[11]?et:nt}let i=n(l),s=i(l);return{c(){s.c(),e=pe()},l(r){s.l(r),e=pe()},m(r,o){s.m(r,o),O(r,e,o)},p(r,o){i===(i=n(r))&&s?s.p(r,o):(s.d(1),s=i(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){s.d(r),r&&p(e)}}}function et(l){let e,n;return{c(){e=R("input"),this.h()},l(i){e=S(i,"INPUT",{type:!0,id:!0,onclick:!0}),this.h()},h(){C(e,"type","checkbox"),C(e,"id",n=l[47](l[104])),C(e,"onclick","return false;"),e.disabled=!0,v(e,"invisible",!l[12])},m(i,s){O(i,e,s)},p(i,s){s[1]&16384&&n!==(n=i[47](i[104]))&&C(e,"id",n),s[0]&4096&&v(e,"invisible",!i[12])},d(i){i&&p(e)}}}function nt(l){let e,n,i,s,r,o;function a(...u){return l[71](l[104],...u)}return{c(){e=R("input"),this.h()},l(u){e=S(u,"INPUT",{type:!0,id:!0}),this.h()},h(){C(e,"type","checkbox"),C(e,"id",n=l[47](l[104])),e.checked=i=l[104].__visual_state=="true"?"false":"",e.indeterminate=s=l[104].__visual_state=="indeterminate"},m(u,P){O(u,e,P),r||(o=G(e,"click",a),r=!0)},p(u,P){l=u,P[1]&16384&&n!==(n=l[47](l[104]))&&C(e,"id",n),P[1]&16384&&i!==(i=l[104].__visual_state=="true"?"false":"")&&(e.checked=i),P[1]&16384&&s!==(s=l[104].__visual_state=="indeterminate")&&(e.indeterminate=s)},d(u){u&&p(e),r=!1,o()}}}function lt(l){let e,n,i,s,r;function o(){return l[70](l[104])}return{c(){e=R("input"),this.h()},l(a){e=S(a,"INPUT",{type:!0,id:!0}),this.h()},h(){C(e,"type","checkbox"),C(e,"id",n=l[47](l[104])),e.checked=i=l[104][l[39].selectedProperty]?"false":""},m(a,u){O(a,e,u),s||(r=G(e,"change",o),s=!0)},p(a,u){l=a,u[1]&16384&&n!==(n=l[47](l[104]))&&C(e,"id",n),u[1]&16640&&i!==(i=l[104][l[39].selectedProperty]?"false":"")&&(e.checked=i)},d(a){a&&p(e),s=!1,r()}}}function Vn(l){let e,n,i;return{c(){e=R("div"),n=R("div"),this.h()},l(s){e=S(s,"DIV",{class:!0});var r=K(e);n=S(r,"DIV",{class:!0}),K(n).forEach(p),r.forEach(p),this.h()},h(){C(n,"class",i="insert-line insert-line-child "+l[23]+" "+l[24]),C(e,"class","insert-line-wrapper")},m(s,r){O(s,e,r),j(e,n)},p(s,r){r[0]&25165824&&i!==(i="insert-line insert-line-child "+s[23]+" "+s[24])&&C(n,"class",i)},d(s){s&&p(e)}}}function Ln(l){let e,n,i,s,r,o,a,u,P;function k(h){l[74](h)}function d(h){l[75](h)}function g(h){l[76](h)}function D(h){l[77](h)}function J(h){l[78](h)}function m(h){l[79](h)}function T(h){l[80](h)}let A={branchRootNode:l[104],treeId:l[7],getId:l[35],checkboxes:l[10],getParentId:l[36],maxExpandedDepth:l[8],recursive:l[9],childDepth:l[38]+1,parentId:l[35](l[104]),leafNodeCheckboxesOnly:l[11],checkboxesDisabled:l[12],expandedLevel:l[16],nodePathProperty:l[26],hasChildrenProperty:l[27],expandedProperty:l[28],selectedProperty:l[29],useCallbackProperty:l[30],priorityProperty:l[31],isDraggableProperty:l[32],insertDisabledProperty:l[33],nestDisabledProperty:l[34],expandCallback:l[13],beforeMovedCallback:l[14],dragEnterCallback:l[17],$$slots:{default:[tt,({node:h})=>({107:h}),({node:h})=>[0,0,0,h?16384:0]]},$$scope:{ctx:l}};return l[0]!==void 0&&(A.tree=l[0]),l[1]!==void 0&&(A.filteredTree=l[1]),l[6]!==void 0&&(A.draggedPath=l[6]),l[3]!==void 0&&(A.dragAndDrop=l[3]),l[2]!==void 0&&(A.highlightedNode=l[2]),l[4]!==void 0&&(A.timeToNest=l[4]),l[5]!==void 0&&(A.pixelNestTreshold=l[5]),e=new ot({props:A}),ee.push(()=>oe(e,"tree",k)),ee.push(()=>oe(e,"filteredTree",d)),ee.push(()=>oe(e,"draggedPath",g)),ee.push(()=>oe(e,"dragAndDrop",D)),ee.push(()=>oe(e,"highlightedNode",J)),ee.push(()=>oe(e,"timeToNest",m)),ee.push(()=>oe(e,"pixelNestTreshold",T)),e.$on("selection",l[81]),e.$on("selected",l[82]),e.$on("unselected",l[83]),e.$on("expansion",l[84]),e.$on("expanded",l[85]),e.$on("closed",l[86]),e.$on("open-ctxmenu",l[87]),e.$on("moved",l[88]),{c(){Qe(e.$$.fragment)},l(h){Xe(e.$$.fragment,h)},m(h,y){Ze(e,h,y),P=!0},p(h,y){const b={};y[1]&16384&&(b.branchRootNode=h[104]),y[0]&128&&(b.treeId=h[7]),y[1]&16&&(b.getId=h[35]),y[0]&1024&&(b.checkboxes=h[10]),y[1]&32&&(b.getParentId=h[36]),y[0]&256&&(b.maxExpandedDepth=h[8]),y[0]&512&&(b.recursive=h[9]),y[1]&128&&(b.childDepth=h[38]+1),y[1]&16400&&(b.parentId=h[35](h[104])),y[0]&2048&&(b.leafNodeCheckboxesOnly=h[11]),y[0]&4096&&(b.checkboxesDisabled=h[12]),y[0]&65536&&(b.expandedLevel=h[16]),y[0]&67108864&&(b.nodePathProperty=h[26]),y[0]&134217728&&(b.hasChildrenProperty=h[27]),y[0]&268435456&&(b.expandedProperty=h[28]),y[0]&536870912&&(b.selectedProperty=h[29]),y[0]&1073741824&&(b.useCallbackProperty=h[30]),y[1]&1&&(b.priorityProperty=h[31]),y[1]&2&&(b.isDraggableProperty=h[32]),y[1]&4&&(b.insertDisabledProperty=h[33]),y[1]&8&&(b.nestDisabledProperty=h[34]),y[0]&8192&&(b.expandCallback=h[13]),y[0]&16384&&(b.beforeMovedCallback=h[14]),y[0]&131072&&(b.dragEnterCallback=h[17]),y[3]&16392&&(b.$$scope={dirty:y,ctx:h}),!n&&y[0]&1&&(n=!0,b.tree=h[0],ae(()=>n=!1)),!i&&y[0]&2&&(i=!0,b.filteredTree=h[1],ae(()=>i=!1)),!s&&y[0]&64&&(s=!0,b.draggedPath=h[6],ae(()=>s=!1)),!r&&y[0]&8&&(r=!0,b.dragAndDrop=h[3],ae(()=>r=!1)),!o&&y[0]&4&&(o=!0,b.highlightedNode=h[2],ae(()=>o=!1)),!a&&y[0]&16&&(a=!0,b.timeToNest=h[4],ae(()=>a=!1)),!u&&y[0]&32&&(u=!0,b.pixelNestTreshold=h[5],ae(()=>u=!1)),e.$set(b)},i(h){P||(H(e.$$.fragment,h),P=!0)},o(h){z(e.$$.fragment,h),P=!1},d(h){xe(e,h)}}}function tt(l){let e;const n=l[68].default,i=ve(n,l,l[96],Tn);return{c(){i&&i.c()},l(s){i&&i.l(s)},m(s,r){i&&i.m(s,r),e=!0},p(s,r){i&&i.p&&(!e||r[3]&16392)&&Ee(i,n,s,s[96],e?Ve(n,s[96],r,Jl):Ie(s[96]),Tn)},i(s){e||(H(i,s),e=!0)},o(s){z(i,s),e=!1},d(s){i&&i.d(s)}}}function An(l){let e;return{c(){e=R("ul"),this.h()},l(n){e=S(n,"UL",{}),K(e).forEach(p),this.h()},h(){v(e,"child-menu",l[38]>0)},m(n,i){O(n,e,i)},p(n,i){i[1]&128&&v(e,"child-menu",n[38]>0)},d(n){n&&p(e)}}}function Mn(l){let e,n,i;return{c(){e=R("div"),n=R("div"),this.h()},l(s){e=S(s,"DIV",{class:!0});var r=K(e);n=S(r,"DIV",{class:!0}),K(n).forEach(p),r.forEach(p),this.h()},h(){C(n,"class",i="insert-line "+l[23]),C(e,"class","insert-line-wrapper")},m(s,r){O(s,e,r),j(e,n)},p(s,r){r[0]&8388608&&i!==(i="insert-line "+s[23])&&C(n,"class",i)},d(s){s&&p(e)}}}function Nn(l,e){let n,i=e[42]==1&&e[58](e[104],e[2],e[41],e[40]),s,r,o,a,u,P,k,d=e[57](e[104],e[2],e[41],e[40]),g,D=X(e[104][e[39].expandedProperty],e[38],e[16])&&e[104][e[39].hasChildrenProperty],J,m=!X(e[104][e[39].expandedProperty],e[38],e[16])&&e[104][e[39].hasChildrenProperty],T,A=e[42]==-1&&e[58](e[104],e[2],e[41],e[40]),h,y=e[104],b,fe,ue,V=i&&En(e);function ne(f,c){return f[104][f[39].hasChildrenProperty]?Zl:Xl}let le=ne(e),F=le(e),M=(e[10]=="perNode"||e[10]=="all")&&In(e);const de=e[68].default,q=ve(de,e,e[96],vn);function Le(...f){return e[72](e[104],...f)}function Ae(...f){return e[73](e[104],...f)}let N=d&&Vn(e),w=D&&Ln(e),E=m&&An(e),I=A&&Mn(e);function he(...f){return e[89](e[104],...f)}function _e(...f){return e[90](e[104],...f)}function ce(...f){return e[91](e[104],...f)}function ge(...f){return e[92](e[104],...f)}function Pe(...f){return e[93](e[104],...f)}const te=()=>e[94](n,y),re=()=>e[94](null,y);return{key:l,first:null,c(){n=R("li"),V&&V.c(),s=x(),r=R("div"),F.c(),o=x(),M&&M.c(),a=x(),q&&q.c(),k=x(),N&&N.c(),g=x(),w&&w.c(),J=x(),E&&E.c(),T=x(),I&&I.c(),h=x(),this.h()},l(f){n=S(f,"LI",{});var c=K(n);V&&V.l(c),s=$(c),r=S(c,"DIV",{class:!0,draggable:!0});var L=K(r);F.l(L),o=$(L),M&&M.l(L),a=$(L),q&&q.l(L),L.forEach(p),k=$(c),N&&N.l(c),g=$(c),w&&w.l(c),J=$(c),E&&E.l(c),T=$(c),I&&I.l(c),h=$(c),c.forEach(p),this.h()},h(){var f,c,L;C(r,"class",u="tree-item "+(e[57](e[104],e[2],e[41],e[40])?e[22]:"")+" "+e[19]+" "+(e[6]==((f=e[104])==null?void 0:f[e[39].nodePathProperty])||(L=(c=e[104])==null?void 0:c[e[39].nodePathProperty])!=null&&L.startsWith(e[6])?e[25]:"")),C(r,"draggable",P=e[3]&&e[104][e[39].isDraggableProperty]!==!1),v(r,"div-has-children",e[104][e[39].hasChildrenProperty]),v(r,"hover",e[58](e[104],e[2],e[41],e[40])||e[57](e[104],e[2],e[41],e[40])),v(n,"is-child",e[37](e[104])),v(n,"has-children",e[104][e[39].hasChildrenProperty]),this.first=n},m(f,c){O(f,n,c),V&&V.m(n,null),j(n,s),j(n,r),F.m(r,null),j(r,o),M&&M.m(r,null),j(r,a),q&&q.m(r,null),j(n,k),N&&N.m(n,null),j(n,g),w&&w.m(n,null),j(n,J),E&&E.m(n,null),j(n,T),I&&I.m(n,null),j(n,h),te(),b=!0,fe||(ue=[G(r,"dragstart",Le),G(r,"dragend",Ae),G(n,"contextmenu",Te(he)),G(n,"drop",Te(_e)),G(n,"dragover",Te(ce)),G(n,"dragenter",Te(ge)),G(n,"dragleave",Te(Pe))],fe=!0)},p(f,c){var L,Q,W;e=f,c[0]&4|c[1]&19968&&(i=e[42]==1&&e[58](e[104],e[2],e[41],e[40])),i?V?V.p(e,c):(V=En(e),V.c(),V.m(n,s)):V&&(V.d(1),V=null),le===(le=ne(e))&&F?F.p(e,c):(F.d(1),F=le(e),F&&(F.c(),F.m(r,o))),e[10]=="perNode"||e[10]=="all"?M?M.p(e,c):(M=In(e),M.c(),M.m(r,a)):M&&(M.d(1),M=null),q&&q.p&&(!b||c[1]&16384|c[3]&8)&&Ee(q,de,e,e[96],b?Ve(de,e[96],c,Ql):Ie(e[96]),vn),(!b||c[0]&38273092|c[1]&18176&&u!==(u="tree-item "+(e[57](e[104],e[2],e[41],e[40])?e[22]:"")+" "+e[19]+" "+(e[6]==((L=e[104])==null?void 0:L[e[39].nodePathProperty])||(W=(Q=e[104])==null?void 0:Q[e[39].nodePathProperty])!=null&&W.startsWith(e[6])?e[25]:"")))&&C(r,"class",u),(!b||c[0]&8|c[1]&16640&&P!==(P=e[3]&&e[104][e[39].isDraggableProperty]!==!1))&&C(r,"draggable",P),(!b||c[0]&38273092|c[1]&18176)&&v(r,"div-has-children",e[104][e[39].hasChildrenProperty]),(!b||c[0]&38273092|c[1]&201344768)&&v(r,"hover",e[58](e[104],e[2],e[41],e[40])||e[57](e[104],e[2],e[41],e[40])),c[0]&4|c[1]&17920&&(d=e[57](e[104],e[2],e[41],e[40])),d?N?N.p(e,c):(N=Vn(e),N.c(),N.m(n,g)):N&&(N.d(1),N=null),c[0]&65536|c[1]&16768&&(D=X(e[104][e[39].expandedProperty],e[38],e[16])&&e[104][e[39].hasChildrenProperty]),D?w?(w.p(e,c),c[0]&65536|c[1]&16768&&H(w,1)):(w=Ln(e),w.c(),H(w,1),w.m(n,J)):w&&(Ge(),z(w,1,1,()=>{w=null}),Je()),c[0]&65536|c[1]&16768&&(m=!X(e[104][e[39].expandedProperty],e[38],e[16])&&e[104][e[39].hasChildrenProperty]),m?E?E.p(e,c):(E=An(e),E.c(),E.m(n,T)):E&&(E.d(1),E=null),c[0]&4|c[1]&19968&&(A=e[42]==-1&&e[58](e[104],e[2],e[41],e[40])),A?I?I.p(e,c):(I=Mn(e),I.c(),I.m(n,h)):I&&(I.d(1),I=null),y!==e[104]&&(re(),y=e[104],te()),(!b||c[1]&16448)&&v(n,"is-child",e[37](e[104])),(!b||c[1]&16640)&&v(n,"has-children",e[104][e[39].hasChildrenProperty])},i(f){b||(H(q,f),H(w),b=!0)},o(f){z(q,f),z(w),b=!1},d(f){f&&p(n),V&&V.d(),F.d(),M&&M.d(),q&&q.d(f),N&&N.d(),w&&w.d(),E&&E.d(),I&&I.d(),re(),fe=!1,vl(ue)}}}function rt(l){let e;const n=l[68]["context-menu"],i=ve(n,l,l[96],Dn);return{c(){i&&i.c()},l(s){i&&i.l(s)},m(s,r){i&&i.m(s,r),e=!0},p(s,r){i&&i.p&&(!e||r[3]&2056)&&Ee(i,n,s,s[96],e?Ve(n,s[96],r,Gl):Ie(s[96]),Dn)},i(s){e||(H(i,s),e=!0)},o(s){z(i,s),e=!1},d(s){i&&i.d(s)}}}function it(l){let e,n=[],i=new Map,s,r,o,a,u=l[45];const P=d=>d[47](d[104]);for(let d=0;d<u.length;d+=1){let g=wn(l,u,d),D=P(g);i.set(D,n[d]=Nn(D,g))}let k={$$slots:{default:[rt,({node:d})=>({104:d}),({node:d})=>[0,0,0,d?2048:0]]},$$scope:{ctx:l}};return o=new ql({props:k}),l[95](o),{c(){e=R("ul");for(let d=0;d<n.length;d+=1)n[d].c();r=x(),Qe(o.$$.fragment),this.h()},l(d){e=S(d,"UL",{class:!0});var g=K(e);for(let D=0;D<n.length;D+=1)n[D].l(g);g.forEach(p),r=$(d),Xe(o.$$.fragment,d),this.h()},h(){C(e,"class",s=l[38]===0?l[18]:""),v(e,"show-lines",l[38]===0&&l[15]),v(e,"child-menu",l[38]>0)},m(d,g){O(d,e,g);for(let D=0;D<n.length;D+=1)n[D]&&n[D].m(e,null);O(d,r,g),Ze(o,d,g),a=!0},p(d,g){g[0]&2147188735|g[1]&536866815|g[3]&16392&&(u=d[45],Ge(),n=Tl(n,g,P,1,d,u,i,e,El,Nn,null,wn),Je()),(!a||g[0]&262144|g[1]&128&&s!==(s=d[38]===0?d[18]:""))&&C(e,"class",s),(!a||g[0]&294912|g[1]&128)&&v(e,"show-lines",d[38]===0&&d[15]),(!a||g[0]&262144|g[1]&128)&&v(e,"child-menu",d[38]>0);const D={};g[3]&2056&&(D.$$scope={dirty:g,ctx:d}),o.$set(D)},i(d){if(!a){for(let g=0;g<u.length;g+=1)H(n[g]);H(o.$$.fragment,d),a=!0}},o(d){for(let g=0;g<n.length;g+=1)z(n[g]);z(o.$$.fragment,d),a=!1},d(d){d&&p(e);for(let g=0;g<n.length;g+=1)n[g].d();d&&p(r),l[95](null),xe(o,d)}}}function Rn(l,e,n,i,s,r,o,a,u,P){return{nodePathProperty:l,expandedProperty:n,selectedProperty:i,useCallbackProperty:s,priorityProperty:r,hasChildrenProperty:e,isDraggableProperty:o,insertDisabledProperty:a,nestDisabledProperty:u,checkboxVisibleProperty:P}}function X(l,e,n){return l!=null||l!=null?l:e<=n}function st(l,e,n){let i,{$$slots:s={},$$scope:r}=e;const o=Sn();let{tree:a=null}=e,{treeId:u=null}=e,{maxExpandedDepth:P=3}=e,{filteredTree:k}=e,{recursive:d=!1}=e,{checkboxes:g="none"}=e,{leafNodeCheckboxesOnly:D=!1}=e,{checkboxesDisabled:J=!1}=e,{dragAndDrop:m=!1}=e,{timeToNest:T=null}=e,{pixelNestTreshold:A=50}=e,{expandCallback:h=null}=e,{showContexMenu:y=!1}=e,{beforeMovedCallback:b=null}=e,{enableVerticalLines:fe=!1}=e,{recalculateNodePath:ue=!0}=e,{expandedLevel:V=0}=e,{dragEnterCallback:ne=null}=e,{treeClass:le="treeview"}=e,{nodeClass:F=null}=e,{expandedToggleClass:M=null}=e,{collapsedToggleClass:de=null}=e,{expandClass:q="inserting-highlighted"}=e,{inserLineClass:Le=null}=e,{inserLineNestClass:Ae=null}=e,{currentlyDraggedClass:N="currently-dragged"}=e,{nodePathProperty:w="nodePath"}=e,{hasChildrenProperty:E="hasChildren"}=e,{expandedProperty:I="__expanded"}=e,{selectedProperty:he="__selected"}=e,{useCallbackProperty:_e="__useCallback"}=e,{priorityProperty:ce="priority"}=e,{isDraggableProperty:ge="isDraggable"}=e,{insertDisabledProperty:Pe="insertDisabled"}=e,{nestDisabledProperty:te="nestDisabled"}=e,{checkboxVisibleProperty:re="checkboxVisible"}=e,f=Rn(w,E,I,he,_e,ce,ge,Pe,te,re),{getId:c=t=>t[f.nodePathProperty]}=e,{getParentId:L=t=>Z(t[f.nodePathProperty])}=e,{isChild:Q=t=>Bl(t[f.nodePathProperty])}=e,{draggedPath:W=null}=e,{highlightedNode:Y=null}=e,{childDepth:me=0}=e,{parentId:qe=null}=e,{branchRootNode:nn={}}=e,Me,Ne=!1,Ce=!1,Be,ln,De=!1,Ue,Re;const be=t=>`${u}-${c(t)}`;function tn(t,_){n(0,a=Ul(a,t,!_,f));let B=t[f.expandedProperty];B&&h!=null&&t[f.useCallbackProperty]==!0&&Bn(t).then(U=>{n(0,a=a.concat(U)),t[f.useCallbackProperty]=!1}).catch(U=>{console.log("ERROR IN CALLBACK!!"),console.log(U)}),o("expansion",{node:t[f.nodePathProperty],value:B}),o(B?"expanded":"closed",t[f.nodePathProperty])}async function Bn(t){return await h(t)}function Un(t){n(0,a=jl(a,t,f))}function jn(t){n(0,a=mn(a,Q,L,t??a,f))}function rn(t){n(0,a=Hl(d,a,t[f.nodePathProperty],Q,L,k??a,f)),on(t)}function sn(t,_){n(0,a=Kl(a,t[f.nodePathProperty],Q,_.target.checked,L,k??a,f)),on(t)}function on(t){let _=t[f.selectedProperty];o("selection",{node:t,value:_}),o(_?"selected":"unselected",t)}function Hn(t,_){return _=="all"?t[f.checkboxVisibleProperty]!=!1:_=="perNode"?t[f.checkboxVisibleProperty]==!0:!1}function an(t,_){if(_[f.isDraggableProperty]===!1){t.preventDefault();return}console.log("dragstart from: "+_[f.nodePathProperty]),t.dataTransfer.dropEffect="move",t.dataTransfer.setData("node_id",_[f.nodePathProperty]),n(6,W=_[f.nodePathProperty])}function fn(t,_,B){if(n(2,Y=null),!m)return;n(6,W=t.dataTransfer.getData("node_id")),console.log(W+" dropped on: "+_[f.nodePathProperty]),T&&n(67,Ce=(Me?new Date-Me:1)>T);let U=a.find(we=>we[f.nodePathProperty]==W),Se={...U},ye=a.find(we=>we[f.nodePathProperty]==Z(W)),ke=Be?0:Ke(t,B);if(ke==0&&_[f.nestDisabledProperty]===!0)return;if((ke==-1||ke==1)&&_[f.insertDisabledProperty]===!0||b&&b(Se,ye,_,Cn(ke))===!1)return;n(0,a=Fl(a,W,_[f.nodePathProperty],Q,ke,ue,f));let yl=a.find(we=>we[f.nodePathProperty]==Z(U[f.nodePathProperty]))??null;o("moved",{oldParent:ye,newParent:yl,oldNode:Se,newNode:U,targetNode:_,insType:Cn(ke)}),Me=null,n(6,W=null),n(2,Y=null)}function un(t,_,B){n(42,Ue=Ke(t,B));let U=t.x-t.target.getBoundingClientRect().x;A&&U>A?n(66,Ne=!0):n(66,Ne=!1),De&&t.preventDefault()}function dn(t,_,B){setTimeout(()=>{if(n(42,Ue=Ke(t,B)),n(41,De=!0),Me=new Date,n(2,Y=_),T&&(n(67,Ce=!1),clearTimeout(ln),ln=setTimeout(()=>{n(67,Ce=!0)},T)),(_[f.nodePathProperty].startsWith(W)||_[f.insertDisabledProperty]===!0&&_[f.nestDisabledProperty]===!0)&&n(41,De=!1),ne){let U=a.find(ye=>ye[f.nodePathProperty]==W),Se=a.find(ye=>ye[f.nodePathProperty]==Z(W));ne(U,Se,_)===!1&&n(41,De=!1)}},1),t.preventDefault()}function hn(t,_){setTimeout(()=>{n(6,W=null),n(2,Y=null)},1)}function _n(t,_,B){return B&&(_==null?void 0:_[f.nodePathProperty])==(t==null?void 0:t[f.nodePathProperty])}function Kn(t,_,B,U){return U&&_n(t,_,B)&&t[f.nestDisabledProperty]!==!0}function Fn(t,_,B,U){return!U&&_n(t,_,B)&&t[f.insertDisabledProperty]!==!0}function je(t,_){y&&(t.preventDefault(),Re.onRightClick(t,_))}a=mn(a,Q,L,k??a,f);let ie=[];const Yn=t=>tn(t,X(t[f.expandedProperty],me,V)&&!t[f.useCallbackProperty]),zn=t=>rn(t),Gn=(t,_)=>{_.preventDefault,sn(t,_)},Jn=(t,_)=>an(_,t),Qn=(t,_)=>hn();function Xn(t){a=t,n(0,a)}function Zn(t){k=t,n(1,k)}function xn(t){W=t,n(6,W)}function $n(t){m=t,n(3,m)}function el(t){Y=t,n(2,Y)}function nl(t){T=t,n(4,T)}function ll(t){A=t,n(5,A)}function tl(t){se.call(this,l,t)}function rl(t){se.call(this,l,t)}function il(t){se.call(this,l,t)}function sl(t){se.call(this,l,t)}function ol(t){se.call(this,l,t)}function al(t){se.call(this,l,t)}const fl=t=>{me==0?je(t.detail.e,t.detail.node):o("open-ctxmenu",t.detail)};function ul(t){se.call(this,l,t)}const dl=(t,_)=>{me==0?je(_,t):o("open-ctxmenu",{e:_,node:t})},hl=(t,_)=>fn(_,t,ie[be(t)]),_l=(t,_)=>un(_,t,ie[be(t)]),cl=(t,_)=>dn(_,t,ie[be(t)]),gl=(t,_)=>(ie[be(t)],void 0);function Pl(t,_){ee[t?"unshift":"push"](()=>{ie[be(_)]=t,n(44,ie)})}function bl(t){ee[t?"unshift":"push"](()=>{Re=t,n(43,Re)})}return l.$$set=t=>{"tree"in t&&n(0,a=t.tree),"treeId"in t&&n(7,u=t.treeId),"maxExpandedDepth"in t&&n(8,P=t.maxExpandedDepth),"filteredTree"in t&&n(1,k=t.filteredTree),"recursive"in t&&n(9,d=t.recursive),"checkboxes"in t&&n(10,g=t.checkboxes),"leafNodeCheckboxesOnly"in t&&n(11,D=t.leafNodeCheckboxesOnly),"checkboxesDisabled"in t&&n(12,J=t.checkboxesDisabled),"dragAndDrop"in t&&n(3,m=t.dragAndDrop),"timeToNest"in t&&n(4,T=t.timeToNest),"pixelNestTreshold"in t&&n(5,A=t.pixelNestTreshold),"expandCallback"in t&&n(13,h=t.expandCallback),"showContexMenu"in t&&n(60,y=t.showContexMenu),"beforeMovedCallback"in t&&n(14,b=t.beforeMovedCallback),"enableVerticalLines"in t&&n(15,fe=t.enableVerticalLines),"recalculateNodePath"in t&&n(61,ue=t.recalculateNodePath),"expandedLevel"in t&&n(16,V=t.expandedLevel),"dragEnterCallback"in t&&n(17,ne=t.dragEnterCallback),"treeClass"in t&&n(18,le=t.treeClass),"nodeClass"in t&&n(19,F=t.nodeClass),"expandedToggleClass"in t&&n(20,M=t.expandedToggleClass),"collapsedToggleClass"in t&&n(21,de=t.collapsedToggleClass),"expandClass"in t&&n(22,q=t.expandClass),"inserLineClass"in t&&n(23,Le=t.inserLineClass),"inserLineNestClass"in t&&n(24,Ae=t.inserLineNestClass),"currentlyDraggedClass"in t&&n(25,N=t.currentlyDraggedClass),"nodePathProperty"in t&&n(26,w=t.nodePathProperty),"hasChildrenProperty"in t&&n(27,E=t.hasChildrenProperty),"expandedProperty"in t&&n(28,I=t.expandedProperty),"selectedProperty"in t&&n(29,he=t.selectedProperty),"useCallbackProperty"in t&&n(30,_e=t.useCallbackProperty),"priorityProperty"in t&&n(31,ce=t.priorityProperty),"isDraggableProperty"in t&&n(32,ge=t.isDraggableProperty),"insertDisabledProperty"in t&&n(33,Pe=t.insertDisabledProperty),"nestDisabledProperty"in t&&n(34,te=t.nestDisabledProperty),"checkboxVisibleProperty"in t&&n(62,re=t.checkboxVisibleProperty),"getId"in t&&n(35,c=t.getId),"getParentId"in t&&n(36,L=t.getParentId),"isChild"in t&&n(37,Q=t.isChild),"draggedPath"in t&&n(6,W=t.draggedPath),"highlightedNode"in t&&n(2,Y=t.highlightedNode),"childDepth"in t&&n(38,me=t.childDepth),"parentId"in t&&n(63,qe=t.parentId),"branchRootNode"in t&&n(64,nn=t.branchRootNode),"$$scope"in t&&n(96,r=t.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&2080374784|l.$$.dirty[1]&15|l.$$.dirty[2]&1&&n(39,f=Rn(w,E,I,he,_e,ce,ge,Pe,te,re)),l.$$.dirty[0]&4|l.$$.dirty[1]&256|l.$$.dirty[2]&48&&n(40,Be=((Y==null?void 0:Y[f==null?void 0:f.insertDisabledProperty])||Ne||Ce)&&(Y==null?void 0:Y[f==null?void 0:f.nestDisabledProperty])!==!0),l.$$.dirty[0]&1&&(a==null||a==null)&&n(0,a=[]),l.$$.dirty[0]&3|l.$$.dirty[1]&352|l.$$.dirty[2]&2&&n(45,i=Wn(We(k||a,qe,Q,L),f)),l.$$.dirty[0]&256,l.$$.dirty[0]&2&&jn(k)},[a,k,Y,m,T,A,W,u,P,d,g,D,J,h,b,fe,V,ne,le,F,M,de,q,Le,Ae,N,w,E,I,he,_e,ce,ge,Pe,te,c,L,Q,me,f,Be,De,Ue,Re,ie,i,o,be,tn,rn,sn,Hn,an,fn,un,dn,hn,Kn,Fn,je,y,ue,re,qe,nn,Un,Ne,Ce,s,Yn,zn,Gn,Jn,Qn,Xn,Zn,xn,$n,el,nl,ll,tl,rl,il,sl,ol,al,fl,ul,dl,hl,_l,cl,gl,Pl,bl,r]}class ot extends Fe{constructor(e){super(),Ye(this,e,st,it,ze,{tree:0,treeId:7,maxExpandedDepth:8,filteredTree:1,recursive:9,checkboxes:10,leafNodeCheckboxesOnly:11,checkboxesDisabled:12,dragAndDrop:3,timeToNest:4,pixelNestTreshold:5,expandCallback:13,showContexMenu:60,beforeMovedCallback:14,enableVerticalLines:15,recalculateNodePath:61,expandedLevel:16,dragEnterCallback:17,treeClass:18,nodeClass:19,expandedToggleClass:20,collapsedToggleClass:21,expandClass:22,inserLineClass:23,inserLineNestClass:24,currentlyDraggedClass:25,nodePathProperty:26,hasChildrenProperty:27,expandedProperty:28,selectedProperty:29,useCallbackProperty:30,priorityProperty:31,isDraggableProperty:32,insertDisabledProperty:33,nestDisabledProperty:34,checkboxVisibleProperty:62,getId:35,getParentId:36,isChild:37,draggedPath:6,highlightedNode:2,childDepth:38,parentId:63,branchRootNode:64,changeAllExpansion:65},null,[-1,-1,-1,-1])}get changeAllExpansion(){return this.$$.ctx[65]}}export{ot as T};
